server:
  port: ${PORT:8080}

spring:
  main:
    banner-mode: off

  mvc:
    pathmatch:
      matching-strategy: ant_path_matcher

  datasource:
    # 优先使用环境变量中的 MySQL 配置，默认使用 TiDB Cloud
    # 在 Render 的 Environment 中配置 SPRING_DATASOURCE_URL, SPRING_DATASOURCE_USERNAME, SPRING_DATASOURCE_PASSWORD
    driver-class-name: ${SPRING_DATASOURCE_DRIVER_CLASS_NAME:com.mysql.cj.jdbc.Driver}
    url: ${SPRING_DATASOURCE_URL:jdbc:mysql://gateway01.ap-northeast-1.prod.aws.tidbcloud.com:4000/fortune500?serverTimezone=Asia/Tokyo&useUnicode=true&characterEncoding=utf8&useSSL=true&requireSSL=true}
    username: ${SPRING_DATASOURCE_USERNAME:2eXmMXiGeCt9iz7.root}
    password: ${SPRING_DATASOURCE_PASSWORD:FPpKFpms5hDXtOuF}
    # 强制指定 Druid 的驱动类，防止自动推断为 H2
    druid:
      driver-class-name: ${SPRING_DATASOURCE_DRIVER_CLASS_NAME:com.mysql.cj.jdbc.Driver}

  jpa:
    # database-platform: org.hibernate.dialect.H2Dialect
    database-platform: org.hibernate.dialect.MySQL8Dialect
    hibernate:
      ddl-auto: update
    show-sql: true

  redis:
    host: 127.0.0.1
    port: 6379
    password:
    database: 0
    timeout: 1800
    lettuce:
      pool:
        min-idle: 2
        max-idle: 8
        max-active: 20
        max-wait: -1

  cache:
    type: redis
    redis:
      time-to-live: 3600000
      cache-null-values: true
      use-key-prefix: true

# 文件上传路径配置
file:
  upload-path: ${UPLOAD_PATH:./uploads/}

# 微信（你现在用不用都没关系）
wechat:
  app-id: wx791af01f47f2f70a
  secret: f9ff26a80f5a88815470b5523c7886d2

# JWT
jwt:
  user-secret-key: wray12121212asdhiashdikasbdiasgfiabgfkbaiwfgiwfawfafa
  user-ttl: 172800000   # 2 天
  user-token-name: Authorization

features:
  rakuten:
    enabled: true

# MyBatis Plus
mybatis-plus:
  configuration:
    log-impl: org.apache.ibatis.logging.stdout.StdOutImpl
    map-underscore-to-camel-case: true
  mapper-locations: classpath:**/mapper/*.xml
  type-aliases-package: com.wray.hjzdm.entity
  global-config:
    banner: off

# Knife4j
knife4j:
  enable: true

# =========================
# 第三方商品平台配置
# =========================

rakuten:
  app-id: 1065081596741280321
  application-secret: d3cea25fd388a80da369ee74a20e67c9c4b00625
  affiliate-id: 4f0e084a.2fb02d14.4f0e084b.3ecf281e

yahoo:
  client-id: dj00aiZpPVJXRUtpaEVLTmRjQSZzPWNvbnN1bWVyc2VjcmV0Jng9MzQ-
  secret: 8TwrbIHTWFS5Zk6tyOBQLVHdOQQ6g3XEnQmU70SO

amazon:
  access-key: YOUR_ACCESS_KEY
  secret-key: YOUR_SECRET_KEY
  partner-tag: YOUR_PARTNER_TAG
  region: us-west-2 # or your specific region
