{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\3jz\\\\Desktop\\\\HJZDM\\\\frontend\\\\hjzdm-frontend\\\\src\\\\pages\\\\ComparePage.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useSearchParams } from 'react-router-dom';\nimport './ComparePage.css';\nimport { goodsApi } from '../services/api';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ComparePage = () => {\n  _s();\n  const [searchParams] = useSearchParams();\n  const [query, setQuery] = useState(searchParams.get('query') || '');\n  const [compareGroups, setCompareGroups] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [sortOption, setSortOption] = useState('price_asc');\n  const [selectedPlatforms, setSelectedPlatforms] = useState([]);\n  const [minPrice, setMinPrice] = useState('');\n  const [maxPrice, setMaxPrice] = useState('');\n  const [viewMode, setViewMode] = useState('grid');\n  const [currentPage, setCurrentPage] = useState(1);\n  const [pageSize, setPageSize] = useState(20);\n  const [selectedKeys, setSelectedKeys] = useState([]);\n\n  // 仅在页面加载时，如果有URL参数，则执行搜索\n  useEffect(() => {\n    if (query.trim()) {\n      searchProducts(query);\n    }\n  }, []);\n  const searchProducts = async searchQuery => {\n    if (!searchQuery.trim()) return; // 如果查询为空则不执行搜索\n\n    setLoading(true);\n    setError(null);\n    try {\n      console.log('Calling API: goodsApi.compareGoods with query:', searchQuery); // デバッグ用ログ\n\n      // 使用api.ts中定义的API服务\n      const response = await goodsApi.compareGoods(searchQuery);\n      console.log('API Response:', response.data); // デバッグ用ログ\n\n      let responseData = [];\n      if (response.data && response.data.data) {\n        responseData = Array.isArray(response.data.data) ? response.data.data : [response.data.data];\n      } else {\n        responseData = [];\n      }\n      console.log('Raw Response Data:', responseData); // デバッグ用ログ\n\n      // レスポンスデータを処理\n      let processedData = [];\n      if (responseData.length > 0) {\n        // APIが返すグループデータを適切に処理\n        processedData = responseData.map(group => {\n          // グループ内の商品リストを処理\n          const goodsList = Array.isArray(group.goodsList) ? group.goodsList : [];\n\n          // 最低価格とプラットフォームを特定\n          let lowestPrice = null;\n          let lowestPlatform = '不明';\n\n          // 最低価格を計算\n          if (goodsList.length > 0) {\n            const lowestProduct = goodsList.reduce((lowest, current) => current.goodsPrice < lowest.goodsPrice ? current : lowest, goodsList[0]);\n            lowestPrice = lowestProduct.goodsPrice;\n            lowestPlatform = getPlatformName(lowestProduct.mallType);\n          }\n          return {\n            goodsName: group.goodsName || '不明な商品',\n            goodsList: goodsList.map(product => ({\n              goodsId: product.goodsId,\n              goodsName: product.goodsName,\n              goodsPrice: product.goodsPrice,\n              goodsLink: product.goodsLink,\n              imgUrl: product.imgUrl,\n              mallType: product.mallType\n            })),\n            lowestPrice: lowestPrice,\n            lowestPlatform: lowestPlatform\n          };\n        });\n        console.log('Processed grouped data:', processedData); // デバッグ用ログ\n      }\n      console.log('Final processed data:', processedData); // デバッグ用ログ\n\n      setCompareGroups(processedData);\n      setLoading(false);\n    } catch (err) {\n      setError('検索に失敗しました。後ほど再試行してください');\n      setLoading(false);\n      console.error(err);\n    }\n  };\n  const handleSearch = e => {\n    e.preventDefault();\n    if (query.trim()) {\n      searchProducts(query);\n    }\n  };\n  const getPlatformName = mallType => {\n    switch (mallType) {\n      case 10:\n        return '楽天';\n      case 20:\n        return 'ヤフー';\n      case 30:\n        return 'タオバオ';\n      default:\n        return '不明なプラットフォーム';\n    }\n  };\n  const getPlatformColor = mallType => {\n    switch (mallType) {\n      case 10:\n        return '#bf0000';\n      // Rakuten Red\n      case 20:\n        return '#ff0033';\n      // Yahoo Red (adjusted)\n      case 30:\n        return '#ff5000';\n      // Taobao Orange\n      default:\n        return '#666';\n    }\n  };\n  const getPlatformBadgeClass = mallType => {\n    switch (mallType) {\n      case 10:\n        return 'platform-badge rakuten';\n      case 20:\n        return 'platform-badge yahoo';\n      case 30:\n        return 'platform-badge taobao';\n      default:\n        return 'platform-badge unknown';\n    }\n  };\n  const allProducts = compareGroups.flatMap(group => group.goodsList);\n  const filteredProducts = allProducts.filter(p => {\n    const platformOk = selectedPlatforms.length === 0 || selectedPlatforms.includes(p.mallType);\n    const minOk = minPrice === '' || !isNaN(Number(minPrice)) && p.goodsPrice >= Number(minPrice);\n    const maxOk = maxPrice === '' || !isNaN(Number(maxPrice)) && p.goodsPrice <= Number(maxPrice);\n    return platformOk && minOk && maxOk;\n  });\n  const sortedProducts = [...filteredProducts].sort((a, b) => {\n    if (sortOption === 'price_asc') return a.goodsPrice - b.goodsPrice;\n    if (sortOption === 'price_desc') return b.goodsPrice - a.goodsPrice;\n    if (sortOption === 'platform') return a.mallType - b.mallType;\n    if (sortOption === 'name') return a.goodsName.localeCompare(b.goodsName);\n    return 0;\n  });\n  const togglePlatform = mt => {\n    setSelectedPlatforms(prev => prev.includes(mt) ? prev.filter(x => x !== mt) : [...prev, mt]);\n  };\n  const totalPages = Math.max(1, Math.ceil(sortedProducts.length / pageSize));\n  const currentPageProducts = sortedProducts.slice((currentPage - 1) * pageSize, currentPage * pageSize);\n  const goPrev = () => setCurrentPage(p => Math.max(1, p - 1));\n  const goNext = () => setCurrentPage(p => Math.min(totalPages, p + 1));\n  const setPage = p => setCurrentPage(Math.min(Math.max(1, p), totalPages));\n  const onChangePageSize = size => {\n    setPageSize(size);\n    setCurrentPage(1);\n  };\n  const getSelectKey = p => {\n    if (p.goodsId) return `id:${p.goodsId}`;\n    const base = `${p.mallType}-${p.goodsLink || ''}-${p.goodsName}`;\n    return `k:${base}`;\n  };\n  const isSelected = key => selectedKeys.includes(key);\n  const toggleSelect = p => {\n    const key = getSelectKey(p);\n    setSelectedKeys(prev => prev.includes(key) ? prev.filter(x => x !== key) : [...prev, key]);\n  };\n  const getSellerFromLink = url => {\n    if (!url) return '不明な店铺';\n    try {\n      const u = new URL(url.startsWith('http') ? url : 'https://' + url.replace(/^\\/\\//, ''));\n      return u.hostname.replace(/^www\\./, '');\n    } catch {\n      return '不明な店铺';\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"compare-page\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"search-section\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"\\u5546\\u54C1\\u4FA1\\u683C\\u6BD4\\u8F03\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSearch,\n        className: \"search-form\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          value: query,\n          onChange: e => setQuery(e.target.value) // 仅更新状态，不触发搜索\n          ,\n          placeholder: \"\\u5546\\u54C1\\u540D\\u3092\\u5165\\u529B\\u3057\\u3066\\u4FA1\\u683C\\u6BD4\\u8F03...\",\n          className: \"search-input\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 203,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          className: \"search-button\",\n          children: \"\\u641C\\u7D22\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 210,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 7\n    }, this), loading && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"loading\",\n      children: \"\\u691C\\u7D22\\u4E2D...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 19\n    }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"error\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 17\n    }, this), !loading && !error && allProducts.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"compare-results\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"\\u4FA1\\u683C\\u6BD4\\u8F03\\u7D50\\u679C\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"controls\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"control-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"\\u6392\\u5E8F\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 222,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            value: sortOption,\n            onChange: e => setSortOption(e.target.value),\n            className: \"sort-select\",\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"price_asc\",\n              children: \"\\u4EF7\\u683C\\u5347\\u5E8F\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 224,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"price_desc\",\n              children: \"\\u4EF7\\u683C\\u964D\\u5E8F\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 225,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"platform\",\n              children: \"\\u5E73\\u53F0\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 226,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"name\",\n              children: \"\\u540D\\u79F0\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 227,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 223,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 221,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"control-group platform-filters\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"\\u5E73\\u53F0\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 231,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"platform-options\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              className: selectedPlatforms.includes(10) ? 'active' : '',\n              onClick: () => togglePlatform(10),\n              children: \"\\u697D\\u5929\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 233,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              className: selectedPlatforms.includes(20) ? 'active' : '',\n              onClick: () => togglePlatform(20),\n              children: \"\\u30E4\\u30D5\\u30FC\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 234,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              className: selectedPlatforms.includes(30) ? 'active' : '',\n              onClick: () => togglePlatform(30),\n              children: \"\\u30BF\\u30AA\\u30D0\\u30AA\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 235,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 232,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 230,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"control-group price-filter\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"\\u4EF7\\u683C\\u533A\\u95F4\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 239,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"price-inputs\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"number\",\n              min: \"0\",\n              placeholder: \"\\u6700\\u5C0F\",\n              value: minPrice,\n              onChange: e => setMinPrice(e.target.value.replace(/[^0-9]/g, ''))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 241,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"-\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 242,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"number\",\n              min: \"0\",\n              placeholder: \"\\u6700\\u5927\",\n              value: maxPrice,\n              onChange: e => setMaxPrice(e.target.value.replace(/[^0-9]/g, ''))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 243,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 240,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 238,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"control-group view-toggle\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"\\u89C6\\u56FE\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 247,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"view-options\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              className: viewMode === 'grid' ? 'active' : '',\n              onClick: () => setViewMode('grid'),\n              children: \"\\u7F51\\u683C\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 249,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              className: viewMode === 'list' ? 'active' : '',\n              onClick: () => setViewMode('list'),\n              children: \"\\u5217\\u8868\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 250,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 248,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 246,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"control-group pagination-controls\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"\\u5206\\u9875\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 254,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"pagination-inner\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              onClick: goPrev,\n              disabled: currentPage === 1,\n              children: \"\\u4E0A\\u4E00\\u9875\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 256,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"page-info\",\n              children: [currentPage, \" / \", totalPages]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 257,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              onClick: goNext,\n              disabled: currentPage === totalPages,\n              children: \"\\u4E0B\\u4E00\\u9875\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 258,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n              value: pageSize,\n              onChange: e => onChangePageSize(Number(e.target.value)),\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: 12,\n                children: \"12\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 260,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: 20,\n                children: \"20\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 261,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: 40,\n                children: \"40\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 262,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 259,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 255,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 253,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 11\n      }, this), selectedKeys.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"compare-table\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"table-header\",\n          children: [\"\\u5DF2\\u9009\\u5BF9\\u6BD4\\uFF08\", selectedKeys.length, \"\\uFF09\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 270,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"table-body\",\n          children: /*#__PURE__*/_jsxDEV(\"table\", {\n            children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n              children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"\\u540D\\u79F0\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 275,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"\\u4EF7\\u683C\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 276,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"\\u5E73\\u53F0\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 277,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"\\u5E97\\u94FA\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 278,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 274,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 273,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n              children: sortedProducts.filter(p => selectedKeys.includes(getSelectKey(p))).map((p, i) => /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                  children: p.goodsName\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 284,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: [\"\\xA5\", p.goodsPrice.toLocaleString()]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 285,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: getPlatformName(p.mallType)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 286,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: getSellerFromLink(p.goodsLink)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 287,\n                  columnNumber: 25\n                }, this)]\n              }, i, true, {\n                fileName: _jsxFileName,\n                lineNumber: 283,\n                columnNumber: 23\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 281,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 272,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 271,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 269,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"compare-group\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `product-grid ${viewMode === 'list' ? 'list' : ''}`,\n          children: currentPageProducts.map((product, productIndex) => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `product-card ${viewMode === 'list' ? 'list' : ''}`,\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"select-row\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"select-checkbox\",\n                children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"checkbox\",\n                  checked: isSelected(getSelectKey(product)),\n                  onChange: () => toggleSelect(product)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 304,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"\\u5BF9\\u6BD4\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 305,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 303,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"seller-name\",\n                children: getSellerFromLink(product.goodsLink)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 307,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 302,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"product-image-container\",\n              children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                src: product.imgUrl || 'https://via.placeholder.com/200x200?text=No+Image',\n                alt: product.goodsName,\n                onError: e => {\n                  e.target.src = 'https://via.placeholder.com/200x200?text=Image+Error';\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 311,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: getPlatformBadgeClass(product.mallType),\n                children: getPlatformName(product.mallType)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 318,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 310,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"product-card-content\",\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                title: product.goodsName,\n                children: product.goodsName\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 324,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"price-section\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"currency\",\n                  children: \"\\xA5\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 327,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"amount\",\n                  children: product.goodsPrice.toLocaleString()\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 328,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 326,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n                href: product.goodsLink,\n                target: \"_blank\",\n                rel: \"noopener noreferrer\",\n                className: `shop-button ${product.mallType === 10 ? 'btn-rakuten' : product.mallType === 20 ? 'btn-yahoo' : ''}`,\n                children: \"\\u7ACB\\u5373\\u8D2D\\u4E70\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 331,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 323,\n              columnNumber: 21\n            }, this)]\n          }, productIndex, true, {\n            fileName: _jsxFileName,\n            lineNumber: 298,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 296,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 295,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 9\n    }, this), !loading && !error && compareGroups.length === 0 && query && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"no-results\",\n      children: \"\\u95A2\\u9023\\u5546\\u54C1\\u304C\\u898B\\u3064\\u304B\\u308A\\u307E\\u305B\\u3093\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 348,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 199,\n    columnNumber: 5\n  }, this);\n};\n_s(ComparePage, \"1TNVOaMjSWJlP6kcN7OjHY1PnWk=\", false, function () {\n  return [useSearchParams];\n});\n_c = ComparePage;\nexport default ComparePage;\nvar _c;\n$RefreshReg$(_c, \"ComparePage\");","map":{"version":3,"names":["React","useState","useEffect","useSearchParams","goodsApi","jsxDEV","_jsxDEV","ComparePage","_s","searchParams","query","setQuery","get","compareGroups","setCompareGroups","loading","setLoading","error","setError","sortOption","setSortOption","selectedPlatforms","setSelectedPlatforms","minPrice","setMinPrice","maxPrice","setMaxPrice","viewMode","setViewMode","currentPage","setCurrentPage","pageSize","setPageSize","selectedKeys","setSelectedKeys","trim","searchProducts","searchQuery","console","log","response","compareGoods","data","responseData","Array","isArray","processedData","length","map","group","goodsList","lowestPrice","lowestPlatform","lowestProduct","reduce","lowest","current","goodsPrice","getPlatformName","mallType","goodsName","product","goodsId","goodsLink","imgUrl","err","handleSearch","e","preventDefault","getPlatformColor","getPlatformBadgeClass","allProducts","flatMap","filteredProducts","filter","p","platformOk","includes","minOk","isNaN","Number","maxOk","sortedProducts","sort","a","b","localeCompare","togglePlatform","mt","prev","x","totalPages","Math","max","ceil","currentPageProducts","slice","goPrev","goNext","min","setPage","onChangePageSize","size","getSelectKey","base","isSelected","key","toggleSelect","getSellerFromLink","url","u","URL","startsWith","replace","hostname","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","type","value","onChange","target","placeholder","onClick","disabled","i","toLocaleString","productIndex","checked","src","alt","onError","title","href","rel","_c","$RefreshReg$"],"sources":["C:/Users/3jz/Desktop/HJZDM/frontend/hjzdm-frontend/src/pages/ComparePage.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useSearchParams } from 'react-router-dom';\nimport './ComparePage.css';\nimport { goodsApi } from '../services/api';\n\ninterface Product {\n  goodsId?: number;\n  goodsName: string;\n  goodsPrice: number;\n  goodsLink: string;\n  imgUrl?: string;\n  mallType: number;\n}\n\ninterface CompareGroup {\n  goodsName: string;\n  goodsList: Product[];\n  lowestPrice: number | null;\n  lowestPlatform?: string;\n}\n\nconst ComparePage: React.FC = () => {\n  const [searchParams] = useSearchParams();\n  const [query, setQuery] = useState(searchParams.get('query') || '');\n  const [compareGroups, setCompareGroups] = useState<CompareGroup[]>([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [sortOption, setSortOption] = useState('price_asc');\n  const [selectedPlatforms, setSelectedPlatforms] = useState<number[]>([]);\n  const [minPrice, setMinPrice] = useState('');\n  const [maxPrice, setMaxPrice] = useState('');\n  const [viewMode, setViewMode] = useState<'grid' | 'list'>('grid');\n  const [currentPage, setCurrentPage] = useState(1);\n  const [pageSize, setPageSize] = useState(20);\n  const [selectedKeys, setSelectedKeys] = useState<string[]>([]);\n\n  // 仅在页面加载时，如果有URL参数，则执行搜索\n  useEffect(() => {\n    if (query.trim()) {\n      searchProducts(query);\n    }\n  }, []);\n\n  const searchProducts = async (searchQuery: string) => {\n    if (!searchQuery.trim()) return; // 如果查询为空则不执行搜索\n    \n    setLoading(true);\n    setError(null);\n    \n    try {\n      console.log('Calling API: goodsApi.compareGoods with query:', searchQuery); // デバッグ用ログ\n      \n      // 使用api.ts中定义的API服务\n      const response = await goodsApi.compareGoods(searchQuery);\n      \n      console.log('API Response:', response.data); // デバッグ用ログ\n      \n      let responseData = [];\n      if (response.data && response.data.data) {\n        responseData = Array.isArray(response.data.data) ? response.data.data : [response.data.data];\n      } else {\n        responseData = [];\n      }\n      \n      console.log('Raw Response Data:', responseData); // デバッグ用ログ\n      \n      // レスポンスデータを処理\n      let processedData = [];\n      \n      if (responseData.length > 0) {\n        // APIが返すグループデータを適切に処理\n        processedData = responseData.map((group: any) => {\n          // グループ内の商品リストを処理\n          const goodsList = Array.isArray(group.goodsList) ? group.goodsList : [];\n          \n          // 最低価格とプラットフォームを特定\n          let lowestPrice = null;\n          let lowestPlatform = '不明';\n          \n          // 最低価格を計算\n          if (goodsList.length > 0) {\n            const lowestProduct = goodsList.reduce((lowest: any, current: any) => \n              current.goodsPrice < lowest.goodsPrice ? current : lowest, goodsList[0]);\n            \n            lowestPrice = lowestProduct.goodsPrice;\n            lowestPlatform = getPlatformName(lowestProduct.mallType);\n          }\n          \n          return {\n            goodsName: group.goodsName || '不明な商品',\n            goodsList: goodsList.map((product: any) => ({\n              goodsId: product.goodsId,\n              goodsName: product.goodsName,\n              goodsPrice: product.goodsPrice,\n              goodsLink: product.goodsLink,\n              imgUrl: product.imgUrl,\n              mallType: product.mallType\n            })),\n            lowestPrice: lowestPrice,\n            lowestPlatform: lowestPlatform\n          };\n        });\n        \n        console.log('Processed grouped data:', processedData); // デバッグ用ログ\n      }\n      \n      console.log('Final processed data:', processedData); // デバッグ用ログ\n      \n      setCompareGroups(processedData);\n      setLoading(false);\n    } catch (err) {\n      setError('検索に失敗しました。後ほど再試行してください');\n      setLoading(false);\n      console.error(err);\n    }\n  };\n\n  const handleSearch = (e: React.FormEvent) => {\n    e.preventDefault();\n    if (query.trim()) {\n      searchProducts(query);\n    }\n  };\n\n  const getPlatformName = (mallType: number): string => {\n    switch (mallType) {\n      case 10: return '楽天';\n      case 20: return 'ヤフー';\n      case 30: return 'タオバオ';\n      default: return '不明なプラットフォーム';\n    }\n  };\n\n  const getPlatformColor = (mallType: number): string => {\n    switch (mallType) {\n      case 10: return '#bf0000'; // Rakuten Red\n      case 20: return '#ff0033'; // Yahoo Red (adjusted)\n      case 30: return '#ff5000'; // Taobao Orange\n      default: return '#666';\n    }\n  };\n\n  const getPlatformBadgeClass = (mallType: number): string => {\n    switch (mallType) {\n      case 10: return 'platform-badge rakuten';\n      case 20: return 'platform-badge yahoo';\n      case 30: return 'platform-badge taobao';\n      default: return 'platform-badge unknown';\n    }\n  };\n\n  const allProducts: Product[] = compareGroups.flatMap(group => group.goodsList);\n  const filteredProducts: Product[] = allProducts.filter(p => {\n    const platformOk = selectedPlatforms.length === 0 || selectedPlatforms.includes(p.mallType);\n    const minOk = minPrice === '' || (!isNaN(Number(minPrice)) && p.goodsPrice >= Number(minPrice));\n    const maxOk = maxPrice === '' || (!isNaN(Number(maxPrice)) && p.goodsPrice <= Number(maxPrice));\n    return platformOk && minOk && maxOk;\n  });\n  const sortedProducts: Product[] = [...filteredProducts].sort((a, b) => {\n    if (sortOption === 'price_asc') return a.goodsPrice - b.goodsPrice;\n    if (sortOption === 'price_desc') return b.goodsPrice - a.goodsPrice;\n    if (sortOption === 'platform') return a.mallType - b.mallType;\n    if (sortOption === 'name') return a.goodsName.localeCompare(b.goodsName);\n    return 0;\n  });\n  const togglePlatform = (mt: number) => {\n    setSelectedPlatforms(prev => prev.includes(mt) ? prev.filter(x => x !== mt) : [...prev, mt]);\n  };\n\n  const totalPages = Math.max(1, Math.ceil(sortedProducts.length / pageSize));\n  const currentPageProducts = sortedProducts.slice((currentPage - 1) * pageSize, currentPage * pageSize);\n  const goPrev = () => setCurrentPage(p => Math.max(1, p - 1));\n  const goNext = () => setCurrentPage(p => Math.min(totalPages, p + 1));\n  const setPage = (p: number) => setCurrentPage(Math.min(Math.max(1, p), totalPages));\n  const onChangePageSize = (size: number) => { setPageSize(size); setCurrentPage(1); };\n\n  const getSelectKey = (p: Product) => {\n    if (p.goodsId) return `id:${p.goodsId}`;\n    const base = `${p.mallType}-${p.goodsLink || ''}-${p.goodsName}`;\n    return `k:${base}`;\n  };\n  const isSelected = (key: string) => selectedKeys.includes(key);\n  const toggleSelect = (p: Product) => {\n    const key = getSelectKey(p);\n    setSelectedKeys(prev => prev.includes(key) ? prev.filter(x => x !== key) : [...prev, key]);\n  };\n\n  const getSellerFromLink = (url?: string) => {\n    if (!url) return '不明な店铺';\n    try {\n      const u = new URL(url.startsWith('http') ? url : ('https://' + url.replace(/^\\/\\//, '')));\n      return u.hostname.replace(/^www\\./, '');\n    } catch {\n      return '不明な店铺';\n    }\n  };\n\n  return (\n    <div className=\"compare-page\">\n      <div className=\"search-section\">\n        <h1>商品価格比較</h1>\n        <form onSubmit={handleSearch} className=\"search-form\">\n          <input\n            type=\"text\"\n            value={query}\n            onChange={(e) => setQuery(e.target.value)} // 仅更新状态，不触发搜索\n            placeholder=\"商品名を入力して価格比較...\"\n            className=\"search-input\"\n          />\n          <button type=\"submit\" className=\"search-button\">搜索</button>\n        </form>\n      </div>\n\n      {loading && <div className=\"loading\">検索中...</div>}\n      {error && <div className=\"error\">{error}</div>}\n\n      {!loading && !error && allProducts.length > 0 && (\n        <div className=\"compare-results\">\n          <h2>価格比較結果</h2>\n          <div className=\"controls\">\n            <div className=\"control-group\">\n              <label>排序</label>\n              <select value={sortOption} onChange={(e) => setSortOption(e.target.value)} className=\"sort-select\">\n                <option value=\"price_asc\">价格升序</option>\n                <option value=\"price_desc\">价格降序</option>\n                <option value=\"platform\">平台</option>\n                <option value=\"name\">名称</option>\n              </select>\n            </div>\n            <div className=\"control-group platform-filters\">\n              <label>平台</label>\n              <div className=\"platform-options\">\n                <button type=\"button\" className={selectedPlatforms.includes(10) ? 'active' : ''} onClick={() => togglePlatform(10)}>楽天</button>\n                <button type=\"button\" className={selectedPlatforms.includes(20) ? 'active' : ''} onClick={() => togglePlatform(20)}>ヤフー</button>\n                <button type=\"button\" className={selectedPlatforms.includes(30) ? 'active' : ''} onClick={() => togglePlatform(30)}>タオバオ</button>\n              </div>\n            </div>\n            <div className=\"control-group price-filter\">\n              <label>价格区间</label>\n              <div className=\"price-inputs\">\n                <input type=\"number\" min=\"0\" placeholder=\"最小\" value={minPrice} onChange={(e) => setMinPrice(e.target.value.replace(/[^0-9]/g, ''))} />\n                <span>-</span>\n                <input type=\"number\" min=\"0\" placeholder=\"最大\" value={maxPrice} onChange={(e) => setMaxPrice(e.target.value.replace(/[^0-9]/g, ''))} />\n              </div>\n            </div>\n            <div className=\"control-group view-toggle\">\n              <label>视图</label>\n              <div className=\"view-options\">\n                <button type=\"button\" className={viewMode === 'grid' ? 'active' : ''} onClick={() => setViewMode('grid')}>网格</button>\n                <button type=\"button\" className={viewMode === 'list' ? 'active' : ''} onClick={() => setViewMode('list')}>列表</button>\n              </div>\n            </div>\n            <div className=\"control-group pagination-controls\">\n              <label>分页</label>\n              <div className=\"pagination-inner\">\n                <button type=\"button\" onClick={goPrev} disabled={currentPage === 1}>上一页</button>\n                <span className=\"page-info\">{currentPage} / {totalPages}</span>\n                <button type=\"button\" onClick={goNext} disabled={currentPage === totalPages}>下一页</button>\n                <select value={pageSize} onChange={(e) => onChangePageSize(Number(e.target.value))}>\n                  <option value={12}>12</option>\n                  <option value={20}>20</option>\n                  <option value={40}>40</option>\n                </select>\n              </div>\n            </div>\n          </div>\n\n          {selectedKeys.length > 0 && (\n            <div className=\"compare-table\">\n              <div className=\"table-header\">已选对比（{selectedKeys.length}）</div>\n              <div className=\"table-body\">\n                <table>\n                  <thead>\n                    <tr>\n                      <th>名称</th>\n                      <th>价格</th>\n                      <th>平台</th>\n                      <th>店铺</th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    {sortedProducts.filter(p => selectedKeys.includes(getSelectKey(p))).map((p, i) => (\n                      <tr key={i}>\n                        <td>{p.goodsName}</td>\n                        <td>¥{p.goodsPrice.toLocaleString()}</td>\n                        <td>{getPlatformName(p.mallType)}</td>\n                        <td>{getSellerFromLink(p.goodsLink)}</td>\n                      </tr>\n                    ))}\n                  </tbody>\n                </table>\n              </div>\n            </div>\n          )}\n          <div className=\"compare-group\">\n            <div className={`product-grid ${viewMode === 'list' ? 'list' : ''}`}>\n              {currentPageProducts.map((product, productIndex) => (\n                <div \n                    key={productIndex} \n                    className={`product-card ${viewMode === 'list' ? 'list' : ''}`}\n                >\n                  <div className=\"select-row\">\n                    <label className=\"select-checkbox\">\n                      <input type=\"checkbox\" checked={isSelected(getSelectKey(product))} onChange={() => toggleSelect(product)} />\n                      <span>对比</span>\n                    </label>\n                    <span className=\"seller-name\">{getSellerFromLink(product.goodsLink)}</span>\n                  </div>\n                  \n                  <div className=\"product-image-container\">\n                    <img \n                      src={product.imgUrl || 'https://via.placeholder.com/200x200?text=No+Image'} \n                        alt={product.goodsName} \n                        onError={(e) => {\n                          (e.target as HTMLImageElement).src = 'https://via.placeholder.com/200x200?text=Image+Error';\n                        }}\n                      />\n                      <div className={getPlatformBadgeClass(product.mallType)}>\n                        {getPlatformName(product.mallType)}\n                      </div>\n                    </div>\n                    \n                    <div className=\"product-card-content\">\n                      <h4 title={product.goodsName}>{product.goodsName}</h4>\n                      \n                      <div className=\"price-section\">\n                        <span className=\"currency\">¥</span>\n                        <span className=\"amount\">{product.goodsPrice.toLocaleString()}</span>\n                      </div>\n                      \n                      <a \n                        href={product.goodsLink} \n                        target=\"_blank\" \n                        rel=\"noopener noreferrer\" \n                        className={`shop-button ${product.mallType === 10 ? 'btn-rakuten' : product.mallType === 20 ? 'btn-yahoo' : ''}`}\n                      >\n                        立即购买\n                      </a>\n                    </div>\n                  </div>\n                ))}\n            </div>\n          </div>\n        </div>\n      )}\n\n      {!loading && !error && compareGroups.length === 0 && query && (\n        <div className=\"no-results\">関連商品が見つかりません</div>\n      )}\n    </div>\n  );\n};\n\nexport default ComparePage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}