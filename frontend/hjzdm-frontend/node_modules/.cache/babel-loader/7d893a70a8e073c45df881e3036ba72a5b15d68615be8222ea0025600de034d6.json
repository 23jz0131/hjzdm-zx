{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useEffect, useRef } from 'react';\nclass WebSocketService {\n  constructor() {\n    this.ws = null;\n    this.reconnectAttempts = 0;\n    this.maxReconnectAttempts = 5;\n    this.reconnectInterval = 3000;\n    this.listeners = new Map();\n  }\n  // 修改类型定义以适应不同类型的事件\n\n  connect(userId) {\n    // 构建WebSocket连接URL\n    // 使用当前页面的hostname，但指定后端端口，避免跨域问题\n    const protocol = window.location.protocol === 'https:' ? 'wss:' : 'ws:';\n    const backendHost = window.location.hostname; // 使用当前页面的主机名\n    const backendPort = 9090; // 后端WebSocket服务端口\n    const wsUrl = `${protocol}//${backendHost}:${backendPort}/ws`;\n    console.log('Attempting to connect to WebSocket:', wsUrl);\n    try {\n      this.ws = new WebSocket(wsUrl);\n      this.ws.onopen = event => {\n        console.log('WebSocket connected');\n        this.reconnectAttempts = 0; // 重置重连计数\n\n        // 发送用户ID（如果可用）\n        if (userId) {\n          this.send(JSON.stringify({\n            type: 'register',\n            userId: userId,\n            message: 'User registration for notifications'\n          }));\n        }\n\n        // 触发打开监听器\n        if (this.listeners.has('open')) {\n          var _this$listeners$get;\n          (_this$listeners$get = this.listeners.get('open')) === null || _this$listeners$get === void 0 ? void 0 : _this$listeners$get.forEach(callback => callback(event));\n        }\n      };\n      this.ws.onmessage = event => {\n        try {\n          const data = JSON.parse(event.data);\n          this.notifyListeners(data.type, data);\n\n          // 触发通用消息监听器\n          if (this.listeners.has('message')) {\n            var _this$listeners$get2;\n            (_this$listeners$get2 = this.listeners.get('message')) === null || _this$listeners$get2 === void 0 ? void 0 : _this$listeners$get2.forEach(callback => callback(data));\n          }\n\n          // 特别处理通知消息\n          if (data.type === 'notification') {\n            if (this.listeners.has('notification')) {\n              var _this$listeners$get3;\n              (_this$listeners$get3 = this.listeners.get('notification')) === null || _this$listeners$get3 === void 0 ? void 0 : _this$listeners$get3.forEach(callback => callback(data));\n            }\n          }\n        } catch (error) {\n          console.error('Error parsing WebSocket message:', error);\n          // 如果不是JSON格式，则触发通用消息监听器\n          if (this.listeners.has('message')) {\n            var _this$listeners$get4;\n            (_this$listeners$get4 = this.listeners.get('message')) === null || _this$listeners$get4 === void 0 ? void 0 : _this$listeners$get4.forEach(callback => callback(event.data));\n          }\n        }\n      };\n      this.ws.onclose = event => {\n        console.log('WebSocket disconnected:', event);\n        if (this.reconnectAttempts < this.maxReconnectAttempts) {\n          console.log(`Attempting to reconnect (${++this.reconnectAttempts}/${this.maxReconnectAttempts})`);\n          setTimeout(() => this.connect(userId), this.reconnectInterval);\n        } else {\n          console.error('Max reconnection attempts reached');\n        }\n\n        // 触发关闭监听器\n        if (this.listeners.has('close')) {\n          var _this$listeners$get5;\n          (_this$listeners$get5 = this.listeners.get('close')) === null || _this$listeners$get5 === void 0 ? void 0 : _this$listeners$get5.forEach(callback => callback(event));\n        }\n      };\n      this.ws.onerror = error => {\n        console.error('WebSocket error:', error);\n\n        // 触发错误监听器\n        if (this.listeners.has('error')) {\n          var _this$listeners$get6;\n          (_this$listeners$get6 = this.listeners.get('error')) === null || _this$listeners$get6 === void 0 ? void 0 : _this$listeners$get6.forEach(callback => callback(error));\n        }\n      };\n    } catch (error) {\n      console.error('Failed to create WebSocket connection:', error);\n    }\n  }\n  send(message) {\n    if (this.ws && this.ws.readyState === WebSocket.OPEN) {\n      this.ws.send(message);\n    } else {\n      var _this$ws;\n      console.warn('WebSocket is not open. ReadyState:', (_this$ws = this.ws) === null || _this$ws === void 0 ? void 0 : _this$ws.readyState);\n    }\n  }\n  disconnect() {\n    if (this.ws) {\n      this.ws.close();\n      this.ws = null;\n    }\n  }\n  isConnected() {\n    return this.ws !== null && this.ws.readyState === WebSocket.OPEN;\n  }\n  addEventListener(type, callback) {\n    var _this$listeners$get7;\n    if (!this.listeners.has(type)) {\n      this.listeners.set(type, new Set());\n    }\n    (_this$listeners$get7 = this.listeners.get(type)) === null || _this$listeners$get7 === void 0 ? void 0 : _this$listeners$get7.add(callback);\n  }\n  removeEventListener(type, callback) {\n    if (this.listeners.has(type)) {\n      var _this$listeners$get8;\n      (_this$listeners$get8 = this.listeners.get(type)) === null || _this$listeners$get8 === void 0 ? void 0 : _this$listeners$get8.delete(callback);\n    }\n  }\n  notifyListeners(type, data) {\n    if (this.listeners.has(type)) {\n      var _this$listeners$get9;\n      (_this$listeners$get9 = this.listeners.get(type)) === null || _this$listeners$get9 === void 0 ? void 0 : _this$listeners$get9.forEach(callback => callback(data));\n    }\n  }\n  getStatus() {\n    if (!this.ws) return 'disconnected';\n    const readyStates = ['CONNECTING', 'OPEN', 'CLOSING', 'CLOSED'];\n    return readyStates[this.ws.readyState];\n  }\n}\n\n// 创建全局单例\nconst websocketService = new WebSocketService();\nexport default websocketService;\n\n// React Hook for easy integration\nexport const useWebSocket = ({\n  onMessage,\n  onOpen,\n  onClose,\n  onError,\n  onNotification\n}) => {\n  _s();\n  const wsRef = useRef(websocketService);\n  useEffect(() => {\n    const currentWs = wsRef.current;\n    if (onMessage) {\n      currentWs.addEventListener('message', onMessage);\n    }\n    if (onOpen) {\n      currentWs.addEventListener('open', onOpen);\n    }\n    if (onClose) {\n      currentWs.addEventListener('close', onClose);\n    }\n    if (onError) {\n      currentWs.addEventListener('error', onError);\n    }\n    if (onNotification) {\n      currentWs.addEventListener('notification', onNotification);\n    }\n\n    // 清理函数\n    return () => {\n      if (onMessage) {\n        currentWs.removeEventListener('message', onMessage);\n      }\n      if (onOpen) {\n        currentWs.removeEventListener('open', onOpen);\n      }\n      if (onClose) {\n        currentWs.removeEventListener('close', onClose);\n      }\n      if (onError) {\n        currentWs.removeEventListener('error', onError);\n      }\n      if (onNotification) {\n        currentWs.removeEventListener('notification', onNotification);\n      }\n    };\n  }, [onMessage, onOpen, onClose, onError, onNotification]);\n  return wsRef.current;\n};\n_s(useWebSocket, \"QdfxMzvzcAhNcX9HkNqVUNbfVRs=\");","map":{"version":3,"names":["useEffect","useRef","WebSocketService","constructor","ws","reconnectAttempts","maxReconnectAttempts","reconnectInterval","listeners","Map","connect","userId","protocol","window","location","backendHost","hostname","backendPort","wsUrl","console","log","WebSocket","onopen","event","send","JSON","stringify","type","message","has","_this$listeners$get","get","forEach","callback","onmessage","data","parse","notifyListeners","_this$listeners$get2","_this$listeners$get3","error","_this$listeners$get4","onclose","setTimeout","_this$listeners$get5","onerror","_this$listeners$get6","readyState","OPEN","_this$ws","warn","disconnect","close","isConnected","addEventListener","_this$listeners$get7","set","Set","add","removeEventListener","_this$listeners$get8","delete","_this$listeners$get9","getStatus","readyStates","websocketService","useWebSocket","onMessage","onOpen","onClose","onError","onNotification","_s","wsRef","currentWs","current"],"sources":["C:/Users/3jz/Desktop/HJZDM/frontend/hjzdm-frontend/src/services/websocketService.ts"],"sourcesContent":["import { useEffect, useRef } from 'react';\n\ninterface WebSocketServiceProps {\n  onMessage?: (message: {type: string, data: any, userId?: number}) => void;\n  onOpen?: () => void;\n  onClose?: (event: CloseEvent) => void;\n  onError?: (error: Event) => void;\n  onNotification?: (notification: {type: string, message: string, userId?: number, timestamp: string}) => void; // 新增通知回调\n}\n\nclass WebSocketService {\n  private ws: WebSocket | null = null;\n  private reconnectAttempts = 0;\n  private maxReconnectAttempts = 5;\n  private reconnectInterval = 3000;\n  private listeners: Map<string, Set<any>> = new Map(); // 修改类型定义以适应不同类型的事件\n\n  connect(userId?: number) {\n    // 构建WebSocket连接URL\n    // 使用当前页面的hostname，但指定后端端口，避免跨域问题\n    const protocol = window.location.protocol === 'https:' ? 'wss:' : 'ws:';\n    const backendHost = window.location.hostname; // 使用当前页面的主机名\n    const backendPort = 9090; // 后端WebSocket服务端口\n    const wsUrl = `${protocol}//${backendHost}:${backendPort}/ws`;\n    \n    console.log('Attempting to connect to WebSocket:', wsUrl);\n\n    try {\n      this.ws = new WebSocket(wsUrl);\n      \n      this.ws.onopen = (event) => {\n        console.log('WebSocket connected');\n        this.reconnectAttempts = 0; // 重置重连计数\n        \n        // 发送用户ID（如果可用）\n        if (userId) {\n          this.send(JSON.stringify({ \n            type: 'register', \n            userId: userId,\n            message: 'User registration for notifications'\n          }));\n        }\n        \n        // 触发打开监听器\n        if (this.listeners.has('open')) {\n          this.listeners.get('open')?.forEach((callback: (data: any) => void) => callback(event));\n        }\n      };\n\n      this.ws.onmessage = (event) => {\n        try {\n          const data = JSON.parse(event.data);\n          this.notifyListeners(data.type, data);\n          \n          // 触发通用消息监听器\n          if (this.listeners.has('message')) {\n            this.listeners.get('message')?.forEach((callback: (data: {type: string, data: any, userId?: number}) => void) => callback(data));\n          }\n          \n          // 特别处理通知消息\n          if (data.type === 'notification') {\n            if (this.listeners.has('notification')) {\n              this.listeners.get('notification')?.forEach((callback: (data: any) => void) => callback(data));\n            }\n          }\n        } catch (error) {\n          console.error('Error parsing WebSocket message:', error);\n          // 如果不是JSON格式，则触发通用消息监听器\n          if (this.listeners.has('message')) {\n            this.listeners.get('message')?.forEach((callback: (data: {type: string, data: any, userId?: number}) => void) => callback(event.data));\n          }\n        }\n      };\n\n      this.ws.onclose = (event) => {\n        console.log('WebSocket disconnected:', event);\n        if (this.reconnectAttempts < this.maxReconnectAttempts) {\n          console.log(`Attempting to reconnect (${++this.reconnectAttempts}/${this.maxReconnectAttempts})`);\n          setTimeout(() => this.connect(userId), this.reconnectInterval);\n        } else {\n          console.error('Max reconnection attempts reached');\n        }\n        \n        // 触发关闭监听器\n        if (this.listeners.has('close')) {\n          this.listeners.get('close')?.forEach((callback: (data: any) => void) => callback(event));\n        }\n      };\n\n      this.ws.onerror = (error) => {\n        console.error('WebSocket error:', error);\n        \n        // 触发错误监听器\n        if (this.listeners.has('error')) {\n          this.listeners.get('error')?.forEach((callback: (data: any) => void) => callback(error));\n        }\n      };\n    } catch (error) {\n      console.error('Failed to create WebSocket connection:', error);\n    }\n  }\n\n  send(message: string) {\n    if (this.ws && this.ws.readyState === WebSocket.OPEN) {\n      this.ws.send(message);\n    } else {\n      console.warn('WebSocket is not open. ReadyState:', this.ws?.readyState);\n    }\n  }\n\n  disconnect() {\n    if (this.ws) {\n      this.ws.close();\n      this.ws = null;\n    }\n  }\n\n  isConnected(): boolean {\n    return this.ws !== null && this.ws.readyState === WebSocket.OPEN;\n  }\n\n  addEventListener(type: string, callback: any) {\n    if (!this.listeners.has(type)) {\n      this.listeners.set(type, new Set());\n    }\n    this.listeners.get(type)?.add(callback);\n  }\n\n  removeEventListener(type: string, callback: any) {\n    if (this.listeners.has(type)) {\n      this.listeners.get(type)?.delete(callback);\n    }\n  }\n\n  private notifyListeners(type: string, data: {type: string, data: any, userId?: number}) {\n    if (this.listeners.has(type)) {\n      this.listeners.get(type)?.forEach((callback: (data: {type: string, data: any, userId?: number}) => void) => callback(data));\n    }\n  }\n\n  getStatus() {\n    if (!this.ws) return 'disconnected';\n    const readyStates = ['CONNECTING', 'OPEN', 'CLOSING', 'CLOSED'];\n    return readyStates[this.ws.readyState];\n  }\n}\n\n// 创建全局单例\nconst websocketService = new WebSocketService();\n\nexport default websocketService;\n\n// React Hook for easy integration\nexport const useWebSocket = ({ onMessage, onOpen, onClose, onError, onNotification }: WebSocketServiceProps) => {\n  const wsRef = useRef(websocketService);\n\n  useEffect(() => {\n    const currentWs = wsRef.current;\n    \n    if (onMessage) {\n      currentWs.addEventListener('message', onMessage);\n    }\n    if (onOpen) {\n      currentWs.addEventListener('open', onOpen);\n    }\n    if (onClose) {\n      currentWs.addEventListener('close', onClose);\n    }\n    if (onError) {\n      currentWs.addEventListener('error', onError);\n    }\n    if (onNotification) {\n      currentWs.addEventListener('notification', onNotification);\n    }\n\n    // 清理函数\n    return () => {\n      if (onMessage) {\n        currentWs.removeEventListener('message', onMessage);\n      }\n      if (onOpen) {\n        currentWs.removeEventListener('open', onOpen);\n      }\n      if (onClose) {\n        currentWs.removeEventListener('close', onClose);\n      }\n      if (onError) {\n        currentWs.removeEventListener('error', onError);\n      }\n      if (onNotification) {\n        currentWs.removeEventListener('notification', onNotification);\n      }\n    };\n  }, [onMessage, onOpen, onClose, onError, onNotification]);\n\n  return wsRef.current;\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}