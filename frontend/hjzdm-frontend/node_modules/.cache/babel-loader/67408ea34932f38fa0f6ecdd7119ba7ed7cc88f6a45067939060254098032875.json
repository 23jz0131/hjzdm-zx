{"ast":null,"code":"import axios from'axios';// 创建axios实例\nconst getApiBaseUrl=()=>{const hostname=window.location.hostname;if(hostname==='localhost'||hostname==='127.0.0.1'){return'http://localhost:9090';}return'https://hjzdm-back-3jz-20260109.loca.lt';};const apiBaseUrl=process.env.REACT_APP_API_BASE_URL||getApiBaseUrl();const apiClient=axios.create({baseURL:apiBaseUrl,// 后端API基础URL\ntimeout:10000,// 请求超时时间\nheaders:{'Bypass-Tunnel-Reminder':'true'// Bypass LocalTunnel splash screen\n}});// 请求拦截器\napiClient.interceptors.request.use(config=>{const token=localStorage.getItem('token');if(token){config.headers.Authorization=token;}return config;},error=>{return Promise.reject(error);});// 响应拦截器\napiClient.interceptors.response.use(response=>{return response;},error=>{console.error('API Error:',error);return Promise.reject(error);});// API接口定义\nexport const goodsApi={// 搜索商品\nsearchGoods:(query,attrFilters,catId)=>{return apiClient.post('/goods/search',{query,attrFilters,catId});},// 比价搜索\ncompareGoods:query=>{return apiClient.post('/goods/compare',{query});},// 按名称搜索商品\nsearchGoodsByName:query=>{return apiClient.get(\"/goods/searchByName?query=\".concat(encodeURIComponent(query)));},// 获取商品详情\ngetGoodsDetail:goodsId=>{return apiClient.get(\"/goods/detail?goodsId=\".concat(goodsId));},// 获取所有商品（分页）\ngetAllGoods:function(){let page=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1;let size=arguments.length>1&&arguments[1]!==undefined?arguments[1]:20;return apiClient.post('/goods/pageAll',{pageNum:page,pageSize:size});},// 获取本地商品（支持动态属性筛选）\ngetGoodsPage:function(query,attrFilters,catId){let page=arguments.length>3&&arguments[3]!==undefined?arguments[3]:1;let size=arguments.length>4&&arguments[4]!==undefined?arguments[4]:20;let minPrice=arguments.length>5?arguments[5]:undefined;let maxPrice=arguments.length>6?arguments[6]:undefined;let mallTypes=arguments.length>7?arguments[7]:undefined;return apiClient.post('/goods/page',{query,attrFilters,catId,pageNum:page,pageSize:size,minPrice,maxPrice,mallTypes});},// 获取我的收藏\ngetMyCollect:function(){let page=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1;let size=arguments.length>1&&arguments[1]!==undefined?arguments[1]:20;return apiClient.post('/goods/myCollect',{pageNum:page,pageSize:size});},// 获取我的商品\ngetMyGoods:function(){let page=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1;let size=arguments.length>1&&arguments[1]!==undefined?arguments[1]:20;return apiClient.post('/goods/myGoods',{pageNum:page,pageSize:size});}};export const categoryApi={getAttributes:catId=>{return apiClient.get(\"/category/attributes?catId=\".concat(catId));},getList:()=>{return apiClient.post('/category/list');}};export const disclosureApi={// 新增爆料 (Add new disclosure)\nadd:data=>{return apiClient.post('/disclosure/add',data);},// 我的爆料 (My disclosures)\ngetMyDisclosure:function(){let page=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1;let size=arguments.length>1&&arguments[1]!==undefined?arguments[1]:20;return apiClient.post('/disclosure/queryMyDisclosure',{pageNum:page,pageSize:size});},// 公开爆料 (Public disclosures)\ngetPublicDisclosure:function(){let page=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1;let size=arguments.length>1&&arguments[1]!==undefined?arguments[1]:20;return apiClient.post('/disclosure/queryPublicList',{pageNum:page,pageSize:size});},// 审核爆料 (Audit)\naudit:(disclosureId,status)=>{return apiClient.post('/disclosure/audit',{disclosureId,status});},// 待审核爆料列表 (Admin pending)\ngetPendingDisclosure:function(){let page=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1;let size=arguments.length>1&&arguments[1]!==undefined?arguments[1]:20;return apiClient.post('/disclosure/queryPendingList',{pageNum:page,pageSize:size});}};export const userApi={// 获取浏览历史\ngetHistory:function(){let page=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1;let size=arguments.length>1&&arguments[1]!==undefined?arguments[1]:20;return apiClient.post('/user/queryHistory',{pageNum:page,pageSize:size});},getProfile:()=>{return apiClient.post('/user/me');},getMetrics:()=>{return apiClient.post('/user/metrics');}};export default apiClient;","map":{"version":3,"names":["axios","getApiBaseUrl","hostname","window","location","apiBaseUrl","process","env","REACT_APP_API_BASE_URL","apiClient","create","baseURL","timeout","headers","interceptors","request","use","config","token","localStorage","getItem","Authorization","error","Promise","reject","response","console","goodsApi","searchGoods","query","attrFilters","catId","post","compareGoods","searchGoodsByName","get","concat","encodeURIComponent","getGoodsDetail","goodsId","getAllGoods","page","arguments","length","undefined","size","pageNum","pageSize","getGoodsPage","minPrice","maxPrice","mallTypes","getMyCollect","getMyGoods","categoryApi","getAttributes","getList","disclosureApi","add","data","getMyDisclosure","getPublicDisclosure","audit","disclosureId","status","getPendingDisclosure","userApi","getHistory","getProfile","getMetrics"],"sources":["C:/Users/3jz/Desktop/HJZDM/frontend/hjzdm-frontend/src/services/api.ts"],"sourcesContent":["import axios from 'axios';\n\n// 创建axios实例\nconst getApiBaseUrl = () => {\n  const hostname = window.location.hostname;\n  if (hostname === 'localhost' || hostname === '127.0.0.1') {\n    return 'http://localhost:9090';\n  }\n  return 'https://hjzdm-back-3jz-20260109.loca.lt';\n};\n\nconst apiBaseUrl = process.env.REACT_APP_API_BASE_URL || getApiBaseUrl();\n\nconst apiClient = axios.create({\n  baseURL: apiBaseUrl, // 后端API基础URL\n  timeout: 10000, // 请求超时时间\n  headers: {\n    'Bypass-Tunnel-Reminder': 'true', // Bypass LocalTunnel splash screen\n  },\n});\n\n// 请求拦截器\napiClient.interceptors.request.use(\n  (config) => {\n    const token = localStorage.getItem('token');\n    if (token) {\n      config.headers.Authorization = token;\n    }\n    return config;\n  },\n  (error) => {\n    return Promise.reject(error);\n  }\n);\n\n// 响应拦截器\napiClient.interceptors.response.use(\n  (response) => {\n    return response;\n  },\n  (error) => {\n    console.error('API Error:', error);\n    return Promise.reject(error);\n  }\n);\n\n// API接口定义\nexport const goodsApi = {\n  // 搜索商品\n  searchGoods: (query: string, attrFilters?: Record<string, string>, catId?: number) => {\n    return apiClient.post('/goods/search', { query, attrFilters, catId });\n  },\n\n  // 比价搜索\n  compareGoods: (query: string) => {\n    return apiClient.post('/goods/compare', { query });\n  },\n\n  // 按名称搜索商品\n  searchGoodsByName: (query: string) => {\n    return apiClient.get(`/goods/searchByName?query=${encodeURIComponent(query)}`);\n  },\n\n  // 获取商品详情\n  getGoodsDetail: (goodsId: number) => {\n    return apiClient.get(`/goods/detail?goodsId=${goodsId}`);\n  },\n\n  // 获取所有商品（分页）\n  getAllGoods: (page: number = 1, size: number = 20) => {\n    return apiClient.post('/goods/pageAll', { pageNum: page, pageSize: size });\n  },\n  \n  // 获取本地商品（支持动态属性筛选）\n  getGoodsPage: (query: string, attrFilters?: Record<string, string>, catId?: number, page: number = 1, size: number = 20, minPrice?: number, maxPrice?: number, mallTypes?: number[]) => {\n    return apiClient.post('/goods/page', { query, attrFilters, catId, pageNum: page, pageSize: size, minPrice, maxPrice, mallTypes });\n  },\n  \n  // 获取我的收藏\n  getMyCollect: (page: number = 1, size: number = 20) => {\n    return apiClient.post('/goods/myCollect', { pageNum: page, pageSize: size });\n  },\n  \n  // 获取我的商品\n  getMyGoods: (page: number = 1, size: number = 20) => {\n    return apiClient.post('/goods/myGoods', { pageNum: page, pageSize: size });\n  }\n};\n\nexport const categoryApi = {\n  getAttributes: (catId: number) => {\n    return apiClient.get(`/category/attributes?catId=${catId}`);\n  },\n  \n  getList: () => {\n    return apiClient.post('/category/list');\n  }\n};\n\nexport const disclosureApi = {\n  // 新增爆料 (Add new disclosure)\n  add: (data: { title: string; content: string; link: string; disclosurePrice: number; imgUrl?: string }) => {\n    return apiClient.post('/disclosure/add', data);\n  },\n  \n  // 我的爆料 (My disclosures)\n  getMyDisclosure: (page: number = 1, size: number = 20) => {\n    return apiClient.post('/disclosure/queryMyDisclosure', { pageNum: page, pageSize: size });\n  },\n\n  // 公开爆料 (Public disclosures)\n  getPublicDisclosure: (page: number = 1, size: number = 20) => {\n    return apiClient.post('/disclosure/queryPublicList', { pageNum: page, pageSize: size });\n  },\n\n  // 审核爆料 (Audit)\n  audit: (disclosureId: number, status: number) => {\n    return apiClient.post('/disclosure/audit', { disclosureId, status });\n  },\n\n  // 待审核爆料列表 (Admin pending)\n  getPendingDisclosure: (page: number = 1, size: number = 20) => {\n    return apiClient.post('/disclosure/queryPendingList', { pageNum: page, pageSize: size });\n  }\n};\n\nexport const userApi = {\n  // 获取浏览历史\n  getHistory: (page: number = 1, size: number = 20) => {\n    return apiClient.post('/user/queryHistory', { pageNum: page, pageSize: size });\n  },\n  getProfile: () => {\n    return apiClient.post('/user/me');\n  },\n  getMetrics: () => {\n    return apiClient.post('/user/metrics');\n  }\n};\n\nexport default apiClient;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}