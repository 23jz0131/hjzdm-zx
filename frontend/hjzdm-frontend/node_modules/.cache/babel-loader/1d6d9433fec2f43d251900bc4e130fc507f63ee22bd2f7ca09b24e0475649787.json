{"ast":null,"code":"import axios from'axios';const apiBaseUrl=process.env.REACT_APP_API_BASE_URL||'http://localhost:9090';const apiClient=axios.create({baseURL:apiBaseUrl,timeout:10000});// 请求拦截器\napiClient.interceptors.request.use(config=>{// 添加认证token（如果需要）\nconst token=localStorage.getItem('token');if(token){config.headers.Authorization=token;}return config;},error=>{return Promise.reject(error);});// 响应拦截器\napiClient.interceptors.response.use(response=>{return response;},error=>{console.error('User API Error:',error);// 根据不同错误类型提供更具体的错误信息\nif(error.response){// 服务器响应错误\nconsole.error('Response Error:',error.response.data);console.error('Status:',error.response.status);console.error('Headers:',error.response.headers);}else if(error.request){// 请求已发出但没有响应\nconsole.error('Request Error:',error.request);}else{// 其他错误\nconsole.error('Error:',error.message);}return Promise.reject(error);});// 用户API接口定义\nexport const userApi={// 用户注册\nregister:userData=>{return apiClient.post('/user/register',userData);},// 用户登录（用户名/邮箱）\nlogin:loginData=>{return apiClient.post('/user/login',loginData);},// 手机号登录\nlocalLogin:loginData=>{return apiClient.post('/user/localLogin',loginData);}};export default apiClient;","map":{"version":3,"names":["axios","apiBaseUrl","process","env","REACT_APP_API_BASE_URL","apiClient","create","baseURL","timeout","interceptors","request","use","config","token","localStorage","getItem","headers","Authorization","error","Promise","reject","response","console","data","status","message","userApi","register","userData","post","login","loginData","localLogin"],"sources":["C:/Users/3jz/Desktop/HJZDM/frontend/hjzdm-frontend/src/services/userApi.ts"],"sourcesContent":["import axios from 'axios';\n\nconst apiBaseUrl = process.env.REACT_APP_API_BASE_URL || 'http://localhost:9090';\n\nconst apiClient = axios.create({\n  baseURL: apiBaseUrl,\n  timeout: 10000,\n});\n\n// 请求拦截器\napiClient.interceptors.request.use(\n  (config) => {\n    // 添加认证token（如果需要）\n    const token = localStorage.getItem('token');\n    if (token) {\n      config.headers.Authorization = token;\n    }\n    return config;\n  },\n  (error) => {\n    return Promise.reject(error);\n  }\n);\n\n// 响应拦截器\napiClient.interceptors.response.use(\n  (response) => {\n    return response;\n  },\n  (error) => {\n    console.error('User API Error:', error);\n    // 根据不同错误类型提供更具体的错误信息\n    if (error.response) {\n      // 服务器响应错误\n      console.error('Response Error:', error.response.data);\n      console.error('Status:', error.response.status);\n      console.error('Headers:', error.response.headers);\n    } else if (error.request) {\n      // 请求已发出但没有响应\n      console.error('Request Error:', error.request);\n    } else {\n      // 其他错误\n      console.error('Error:', error.message);\n    }\n    return Promise.reject(error);\n  }\n);\n\n// 用户API接口定义\nexport const userApi = {\n  // 用户注册\n  register: (userData: {\n    username: string;\n    email: string;\n    password: string;\n    confirmPassword: string;\n  }) => {\n    return apiClient.post('/user/register', userData);\n  },\n\n  // 用户登录（用户名/邮箱）\n  login: (loginData: { username: string; password: string }) => {\n    return apiClient.post('/user/login', loginData);\n  },\n\n  // 手机号登录\n  localLogin: (loginData: { phone: string; password: string }) => {\n    return apiClient.post('/user/localLogin', loginData);\n  },\n};\n\nexport default apiClient;\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CAEzB,KAAM,CAAAC,UAAU,CAAGC,OAAO,CAACC,GAAG,CAACC,sBAAsB,EAAI,uBAAuB,CAEhF,KAAM,CAAAC,SAAS,CAAGL,KAAK,CAACM,MAAM,CAAC,CAC7BC,OAAO,CAAEN,UAAU,CACnBO,OAAO,CAAE,KACX,CAAC,CAAC,CAEF;AACAH,SAAS,CAACI,YAAY,CAACC,OAAO,CAACC,GAAG,CAC/BC,MAAM,EAAK,CACV;AACA,KAAM,CAAAC,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAC3C,GAAIF,KAAK,CAAE,CACTD,MAAM,CAACI,OAAO,CAACC,aAAa,CAAGJ,KAAK,CACtC,CACA,MAAO,CAAAD,MAAM,CACf,CAAC,CACAM,KAAK,EAAK,CACT,MAAO,CAAAC,OAAO,CAACC,MAAM,CAACF,KAAK,CAAC,CAC9B,CACF,CAAC,CAED;AACAb,SAAS,CAACI,YAAY,CAACY,QAAQ,CAACV,GAAG,CAChCU,QAAQ,EAAK,CACZ,MAAO,CAAAA,QAAQ,CACjB,CAAC,CACAH,KAAK,EAAK,CACTI,OAAO,CAACJ,KAAK,CAAC,iBAAiB,CAAEA,KAAK,CAAC,CACvC;AACA,GAAIA,KAAK,CAACG,QAAQ,CAAE,CAClB;AACAC,OAAO,CAACJ,KAAK,CAAC,iBAAiB,CAAEA,KAAK,CAACG,QAAQ,CAACE,IAAI,CAAC,CACrDD,OAAO,CAACJ,KAAK,CAAC,SAAS,CAAEA,KAAK,CAACG,QAAQ,CAACG,MAAM,CAAC,CAC/CF,OAAO,CAACJ,KAAK,CAAC,UAAU,CAAEA,KAAK,CAACG,QAAQ,CAACL,OAAO,CAAC,CACnD,CAAC,IAAM,IAAIE,KAAK,CAACR,OAAO,CAAE,CACxB;AACAY,OAAO,CAACJ,KAAK,CAAC,gBAAgB,CAAEA,KAAK,CAACR,OAAO,CAAC,CAChD,CAAC,IAAM,CACL;AACAY,OAAO,CAACJ,KAAK,CAAC,QAAQ,CAAEA,KAAK,CAACO,OAAO,CAAC,CACxC,CACA,MAAO,CAAAN,OAAO,CAACC,MAAM,CAACF,KAAK,CAAC,CAC9B,CACF,CAAC,CAED;AACA,MAAO,MAAM,CAAAQ,OAAO,CAAG,CACrB;AACAC,QAAQ,CAAGC,QAKV,EAAK,CACJ,MAAO,CAAAvB,SAAS,CAACwB,IAAI,CAAC,gBAAgB,CAAED,QAAQ,CAAC,CACnD,CAAC,CAED;AACAE,KAAK,CAAGC,SAAiD,EAAK,CAC5D,MAAO,CAAA1B,SAAS,CAACwB,IAAI,CAAC,aAAa,CAAEE,SAAS,CAAC,CACjD,CAAC,CAED;AACAC,UAAU,CAAGD,SAA8C,EAAK,CAC9D,MAAO,CAAA1B,SAAS,CAACwB,IAAI,CAAC,kBAAkB,CAAEE,SAAS,CAAC,CACtD,CACF,CAAC,CAED,cAAe,CAAA1B,SAAS","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}