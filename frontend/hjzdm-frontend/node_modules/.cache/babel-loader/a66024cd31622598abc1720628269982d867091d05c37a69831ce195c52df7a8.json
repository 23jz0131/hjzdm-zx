{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\3jz\\\\Desktop\\\\HJZDM\\\\frontend\\\\hjzdm-frontend\\\\src\\\\pages\\\\ComparePage.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useSearchParams } from 'react-router-dom';\nimport './ComparePage.css';\nimport { goodsApi, userApi, goodsOperateApi } from '../services/api';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ComparePage = () => {\n  _s();\n  const [searchParams] = useSearchParams();\n  const [query, setQuery] = useState(searchParams.get('query') || '');\n  const [compareGroups, setCompareGroups] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [minPrice, setMinPrice] = useState('');\n  const [maxPrice, setMaxPrice] = useState('');\n  const [currentPage, setCurrentPage] = useState(1);\n  const [pageSize, setPageSize] = useState(50);\n\n  // Japanese Labels\n  const labels = {\n    title: '商品価格比較',\n    searchPlaceholder: '商品名、型番、キーワードを入力...',\n    searchBtn: '検索',\n    searching: '検索中...',\n    noResults: '関連商品が見つかりません',\n    filters: '絞り込み',\n    priceRange: '価格帯',\n    platforms: '販売サイト',\n    sort: '並び替え',\n    sortPriceAsc: '価格が安い順',\n    sortPriceDesc: '価格が高い順',\n    sortPlatform: 'サイト順',\n    goToShop: 'サイトへ',\n    trend: '価格推移',\n    compare: '比較する',\n    prevPage: '前へ',\n    nextPage: '次へ',\n    min: '下限',\n    max: '上限',\n    yen: '円'\n  };\n  const [collectedIds, setCollectedIds] = useState(new Set());\n\n  // Search Source\n  const [executedQuery, setExecutedQuery] = useState('');\n  const [totalItems, setTotalItems] = useState(0);\n\n  // 仅在页面加载时，如果有URL参数，则执行搜索\n  useEffect(() => {\n    if (query.trim()) {\n      searchProducts(query);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  useEffect(() => {\n    (async () => {\n      try {\n        const res = await goodsApi.getMyCollect(1, 500);\n        if (res.data && res.data.code === 200 && Array.isArray(res.data.data)) {\n          const ids = res.data.data.map(g => g.goodsId).filter(id => typeof id === 'number');\n          setCollectedIds(new Set(ids));\n        }\n      } catch (e) {}\n    })();\n  }, []);\n  const toggleCollect = async goodsId => {\n    try {\n      if (collectedIds.has(goodsId)) {\n        const res = await goodsOperateApi.cancelCollect(goodsId);\n        if (res.data && res.data.code === 200) {\n          setCollectedIds(prev => {\n            const next = new Set(prev);\n            next.delete(goodsId);\n            return next;\n          });\n        }\n      } else {\n        const res = await goodsOperateApi.collect(goodsId);\n        if (res.data && res.data.code === 200) {\n          setCollectedIds(prev => {\n            const next = new Set(prev);\n            next.add(goodsId);\n            return next;\n          });\n        } else {\n          alert('请先登录');\n        }\n      }\n    } catch (e) {\n      alert('操作失败');\n    }\n  };\n  const ensureGoodsIdAndCollect = async product => {\n    try {\n      const token = localStorage.getItem('token');\n      if (!token) {\n        alert('请先登录');\n        return;\n      }\n      if (product.goodsId) {\n        await toggleCollect(product.goodsId);\n        return;\n      }\n      const payload = {\n        goodsName: product.goodsName,\n        goodsPrice: product.goodsPrice,\n        goodsLink: product.goodsLink,\n        imgUrl: product.imgUrl,\n        mallType: product.mallType,\n        status: 1\n      };\n      const addRes = await goodsApi.addAndReturn(payload);\n      if (addRes.data && addRes.data.code === 200 && addRes.data.data && addRes.data.data.goodsId) {\n        const newId = addRes.data.data.goodsId;\n        await toggleCollect(newId);\n      } else {\n        alert('新增商品失败');\n      }\n    } catch (e) {\n      alert('操作失败');\n    }\n  };\n  const ensureGoodsIdAndHistory = async product => {\n    try {\n      const token = localStorage.getItem('token');\n      if (!token) {\n        alert('请先登录，才能记录浏览历史');\n        return;\n      }\n      console.log('ensureGoodsIdAndHistory called for goods:', product.goodsName, 'goodsId:', product.goodsId);\n      if (product.goodsId) {\n        const res = await userApi.addHistory(product.goodsId);\n        console.log('addHistory response:', res.data);\n        return;\n      }\n      const payload = {\n        goodsName: product.goodsName,\n        goodsPrice: product.goodsPrice,\n        goodsLink: product.goodsLink,\n        imgUrl: product.imgUrl,\n        mallType: product.mallType,\n        status: 1\n      };\n      const addRes = await goodsApi.addAndReturn(payload);\n      console.log('addAndReturn response:', addRes.data);\n      if (addRes.data && addRes.data.code === 200 && addRes.data.data && addRes.data.data.goodsId) {\n        const newId = addRes.data.data.goodsId;\n        const res = await userApi.addHistory(newId);\n        console.log('addHistory after add response:', res.data);\n      }\n    } catch (e) {\n      console.error('ensureGoodsIdAndHistory error:', e);\n    }\n  };\n  const searchProducts = async searchQuery => {\n    if (!searchQuery.trim()) return;\n    setExecutedQuery(searchQuery);\n    setLoading(true);\n    setError(null);\n    try {\n      const response = await goodsApi.compareGoods(searchQuery);\n      let responseData = [];\n      if (response.data && response.data.data) {\n        responseData = Array.isArray(response.data.data) ? response.data.data : [response.data.data];\n      }\n      let processedData = [];\n      if (responseData.length > 0) {\n        processedData = responseData.map(group => {\n          const goodsList = Array.isArray(group.goodsList) ? group.goodsList : [];\n          let lowestPrice = null;\n          let lowestPlatform = '不明';\n          if (goodsList.length > 0) {\n            const lowestProduct = goodsList.reduce((lowest, current) => current.goodsPrice < lowest.goodsPrice ? current : lowest, goodsList[0]);\n            lowestPrice = lowestProduct.goodsPrice;\n            lowestPlatform = getPlatformName(lowestProduct.mallType);\n          }\n          return {\n            goodsName: group.goodsName || '不明な商品',\n            goodsList: goodsList.map(product => ({\n              goodsId: product.goodsId,\n              goodsName: product.goodsName,\n              goodsPrice: product.goodsPrice,\n              goodsLink: product.goodsLink,\n              imgUrl: product.imgUrl,\n              mallType: product.mallType\n            })),\n            lowestPrice: lowestPrice,\n            lowestPlatform: lowestPlatform\n          };\n        });\n      }\n\n      // Fallback: if compare returns empty, try local catalog search\n      if (processedData.length === 0) {\n        try {\n          const localRes = await goodsApi.getGoodsPage(searchQuery, {}, undefined, 1, 50);\n          if (localRes.data && localRes.data.code === 200) {\n            var _localRes$data$data, _localRes$data$data2;\n            const records = ((_localRes$data$data = localRes.data.data) === null || _localRes$data$data === void 0 ? void 0 : _localRes$data$data.records) || [];\n            setTotalItems(((_localRes$data$data2 = localRes.data.data) === null || _localRes$data$data2 === void 0 ? void 0 : _localRes$data$data2.total) || 0);\n            processedData = records.map(g => ({\n              goodsName: g.goodsName,\n              goodsList: [{\n                goodsId: g.goodsId,\n                goodsName: g.goodsName,\n                goodsPrice: g.goodsPrice,\n                goodsLink: g.goodsLink || '#',\n                imgUrl: g.imgUrl,\n                mallType: g.mallType || 0\n              }],\n              lowestPrice: g.goodsPrice,\n              lowestPlatform: getPlatformName(g.mallType || 0)\n            }));\n          }\n        } catch (e) {}\n      }\n      setCompareGroups(processedData);\n      setLoading(false);\n    } catch (err) {\n      try {\n        let processedData = [];\n        const searchRes = await goodsApi.searchGoods(searchQuery);\n        const list = searchRes.data && searchRes.data.data ? Array.isArray(searchRes.data.data) ? searchRes.data.data : [searchRes.data.data] : [];\n        processedData = list.map(g => ({\n          goodsName: g.goodsName,\n          goodsList: [{\n            goodsId: g.goodsId,\n            goodsName: g.goodsName,\n            goodsPrice: g.goodsPrice,\n            goodsLink: g.goodsLink || '#',\n            imgUrl: g.imgUrl,\n            mallType: g.mallType || 0\n          }],\n          lowestPrice: g.goodsPrice,\n          lowestPlatform: getPlatformName(g.mallType || 0)\n        }));\n        setCompareGroups(processedData);\n      } catch (fallbackErr) {\n        setError('検索に失敗しました。後ほど再試行してください');\n      } finally {\n        setLoading(false);\n      }\n    }\n  };\n  const handleSearch = e => {\n    e.preventDefault();\n    if (query.trim()) {\n      searchProducts(query);\n    }\n  };\n  const getPlatformName = mallType => {\n    switch (mallType) {\n      case 10:\n        return '楽天';\n      case 20:\n        return 'Yahoo!';\n      case 40:\n        return 'Amazon';\n      default:\n        return '其他';\n    }\n  };\n  const allProducts = compareGroups.flatMap(group => group.goodsList);\n  const filteredProducts = allProducts.filter(p => {\n    const minOk = minPrice === '' || !isNaN(Number(minPrice)) && p.goodsPrice >= Number(minPrice);\n    const maxOk = maxPrice === '' || !isNaN(Number(maxPrice)) && p.goodsPrice <= Number(maxPrice);\n    const validData = p.goodsPrice > 0 && p.goodsLink && p.goodsLink !== '#' && p.goodsLink !== '';\n    return minOk && maxOk && validData;\n  });\n  const totalPages = Math.max(1, Math.ceil(filteredProducts.length / pageSize));\n  const currentPageProducts = filteredProducts.slice((currentPage - 1) * pageSize, currentPage * pageSize);\n  const goPrev = () => setCurrentPage(p => Math.max(1, p - 1));\n  const goNext = () => setCurrentPage(p => Math.min(totalPages, p + 1));\n  const onChangePageSize = size => {\n    setPageSize(size);\n    setCurrentPage(1);\n  };\n  const [selectedProducts, setSelectedProducts] = useState([]);\n  const [compareModalOpen, setCompareModalOpen] = useState(false);\n\n  // ... (existing code)\n\n  const getProductKey = p => {\n    if (p.goodsId) return `id:${p.goodsId}`;\n    return `link:${p.goodsLink}`;\n  };\n  const isSelected = p => {\n    const key = getProductKey(p);\n    return selectedProducts.some(sp => getProductKey(sp) === key);\n  };\n  const toggleSelect = p => {\n    const key = getProductKey(p);\n    if (isSelected(p)) {\n      setSelectedProducts(prev => prev.filter(sp => getProductKey(sp) !== key));\n    } else {\n      if (selectedProducts.length >= 4) {\n        alert('最大4件まで比較可能です');\n        return;\n      }\n      setSelectedProducts(prev => [...prev, p]);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"compare-page\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"search-section\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"search-box\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          className: \"search-input\",\n          placeholder: labels.searchPlaceholder,\n          value: query,\n          onChange: e => setQuery(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 345,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"search-btn\",\n          onClick: handleSearch,\n          disabled: loading,\n          children: loading ? labels.searching : labels.searchBtn\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 352,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 344,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 343,\n      columnNumber: 7\n    }, this), !loading && !error && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"compare-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"filter-sidebar\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"filter-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: labels.priceRange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 363,\n            columnNumber: 16\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"price-inputs\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"number\",\n              placeholder: labels.min,\n              value: minPrice,\n              onChange: e => setMinPrice(e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 365,\n              columnNumber: 18\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"-\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 371,\n              columnNumber: 18\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"number\",\n              placeholder: labels.max,\n              value: maxPrice,\n              onChange: e => setMaxPrice(e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 372,\n              columnNumber: 18\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 364,\n            columnNumber: 16\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 362,\n          columnNumber: 14\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 361,\n        columnNumber: 12\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"main-content\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"results-header\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"results-count\",\n            children: [totalItems, \" \\u4EF6\\u306E\\u691C\\u7D22\\u7D50\\u679C\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 384,\n            columnNumber: 16\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"sort-controls\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 387,\n            columnNumber: 16\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 383,\n          columnNumber: 14\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"product-list-view\",\n          children: currentPageProducts.map((product, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"product-row\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"p-img\",\n              children: /*#__PURE__*/_jsxDEV(\"img\", {\n                src: product.imgUrl || 'https://placehold.co/160x160',\n                alt: product.goodsName,\n                onError: e => e.target.src = 'https://placehold.co/160x160'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 396,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 395,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"p-info\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"p-title\",\n                title: product.goodsName,\n                children: /*#__PURE__*/_jsxDEV(\"a\", {\n                  href: product.goodsLink,\n                  target: \"_blank\",\n                  rel: \"noopener noreferrer\",\n                  children: product.goodsName\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 400,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 399,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"p-meta\",\n                children: /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: `mall-tag mall-${product.mallType}`,\n                  children: getPlatformName(product.mallType)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 405,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 404,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 398,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"p-price-area\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"p-price\",\n                children: [\"\\xA5\", product.goodsPrice.toLocaleString()]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 409,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 408,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"p-action\",\n              children: [/*#__PURE__*/_jsxDEV(\"a\", {\n                href: product.goodsLink,\n                target: \"_blank\",\n                rel: \"noopener noreferrer\",\n                className: \"btn-shop\",\n                children: labels.goToShop\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 414,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"compare-check\",\n                onClick: e => {\n                  e.preventDefault();\n                  toggleSelect(product);\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"checkbox\",\n                  checked: isSelected(product),\n                  onChange: () => {} // Handled by label onClick\n                  ,\n                  style: {\n                    pointerEvents: 'none'\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 418,\n                  columnNumber: 23\n                }, this), \" \", labels.compare]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 417,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 413,\n              columnNumber: 19\n            }, this)]\n          }, index, true, {\n            fileName: _jsxFileName,\n            lineNumber: 394,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 392,\n          columnNumber: 14\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"pagination\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: goPrev,\n            disabled: currentPage === 1,\n            className: \"page-btn\",\n            children: labels.prevPage\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 431,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"page-info\",\n            children: [currentPage, \" / \", totalPages]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 438,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: goNext,\n            disabled: currentPage === totalPages,\n            className: \"page-btn\",\n            children: labels.nextPage\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 439,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 430,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 382,\n        columnNumber: 12\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 359,\n      columnNumber: 9\n    }, this), selectedProducts.length > 0 && !compareModalOpen && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"floating-dock\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"dock-content\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"selected-items-row\",\n          children: selectedProducts.map((p, idx) => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"dock-item\",\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              src: p.imgUrl || 'https://placehold.co/60x60',\n              alt: p.goodsName,\n              onError: e => e.target.src = 'https://placehold.co/60x60'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 458,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"remove-item-btn\",\n              onClick: () => toggleSelect(p),\n              children: \"\\xD7\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 459,\n              columnNumber: 19\n            }, this)]\n          }, idx, true, {\n            fileName: _jsxFileName,\n            lineNumber: 457,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 455,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"dock-actions\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn-clear\",\n            onClick: () => setSelectedProducts([]),\n            children: \"\\u30AF\\u30EA\\u30A2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 464,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn-compare-start\",\n            onClick: () => setCompareModalOpen(true),\n            children: [\"\\u6BD4\\u8F03\\u3059\\u308B (\", selectedProducts.length, \")\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 465,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 463,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 454,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 453,\n      columnNumber: 9\n    }, this), compareModalOpen && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"compare-modal-overlay\",\n      onClick: () => setCompareModalOpen(false),\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"compare-modal\",\n        onClick: e => e.stopPropagation(),\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal-header-row\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"\\u5546\\u54C1\\u6BD4\\u8F03\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 476,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"modal-close\",\n            onClick: () => setCompareModalOpen(false),\n            children: \"\\xD7\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 477,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 475,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal-table-container\",\n          children: /*#__PURE__*/_jsxDEV(\"table\", {\n            className: \"compare-table\",\n            children: /*#__PURE__*/_jsxDEV(\"tbody\", {\n              children: [/*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"\\u5546\\u54C1\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 484,\n                  columnNumber: 21\n                }, this), selectedProducts.map((p, idx) => /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"compare-col\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"col-header\",\n                    children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                      src: p.imgUrl || 'https://placehold.co/120x120',\n                      alt: p.goodsName,\n                      className: \"col-img\",\n                      onError: e => e.target.src = 'https://placehold.co/120x120'\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 488,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"col-title\",\n                      title: p.goodsName,\n                      children: p.goodsName\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 489,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                      className: \"col-remove\",\n                      onClick: () => toggleSelect(p),\n                      children: \"\\xD7\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 490,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 487,\n                    columnNumber: 25\n                  }, this)\n                }, idx, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 486,\n                  columnNumber: 23\n                }, this))]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 483,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"\\u4FA1\\u683C\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 497,\n                  columnNumber: 21\n                }, this), selectedProducts.map((p, idx) => /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"compare-col\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"col-price\",\n                    children: [\"\\xA5\", p.goodsPrice.toLocaleString()]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 500,\n                    columnNumber: 25\n                  }, this)\n                }, idx, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 499,\n                  columnNumber: 23\n                }, this))]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 496,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"\\u8CA9\\u58F2\\u30B5\\u30A4\\u30C8\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 506,\n                  columnNumber: 21\n                }, this), selectedProducts.map((p, idx) => /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"compare-col\",\n                  children: /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: `mall-tag mall-${p.mallType}`,\n                    children: getPlatformName(p.mallType)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 509,\n                    columnNumber: 25\n                  }, this)\n                }, idx, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 508,\n                  columnNumber: 23\n                }, this))]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 505,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"\\u64CD\\u4F5C\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 516,\n                  columnNumber: 21\n                }, this), selectedProducts.map((p, idx) => /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"compare-col\",\n                  children: /*#__PURE__*/_jsxDEV(\"a\", {\n                    href: p.goodsLink,\n                    target: \"_blank\",\n                    rel: \"noopener noreferrer\",\n                    className: \"col-action\",\n                    children: \"\\u30B5\\u30A4\\u30C8\\u3078\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 519,\n                    columnNumber: 25\n                  }, this)\n                }, idx, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 518,\n                  columnNumber: 23\n                }, this))]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 515,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 481,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 480,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 479,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 474,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 473,\n      columnNumber: 9\n    }, this), !loading && !error && compareGroups.length === 0 && query && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"no-results\",\n      children: \"\\u95A2\\u9023\\u5546\\u54C1\\u304C\\u898B\\u3064\\u304B\\u308A\\u307E\\u305B\\u3093\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 533,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 341,\n    columnNumber: 5\n  }, this);\n};\n_s(ComparePage, \"CqBRXJVXJpnCxnWYBYjl0Znisok=\", false, function () {\n  return [useSearchParams];\n});\n_c = ComparePage;\nexport default ComparePage;\nvar _c;\n$RefreshReg$(_c, \"ComparePage\");","map":{"version":3,"names":["React","useState","useEffect","useSearchParams","goodsApi","userApi","goodsOperateApi","jsxDEV","_jsxDEV","ComparePage","_s","searchParams","query","setQuery","get","compareGroups","setCompareGroups","loading","setLoading","error","setError","minPrice","setMinPrice","maxPrice","setMaxPrice","currentPage","setCurrentPage","pageSize","setPageSize","labels","title","searchPlaceholder","searchBtn","searching","noResults","filters","priceRange","platforms","sort","sortPriceAsc","sortPriceDesc","sortPlatform","goToShop","trend","compare","prevPage","nextPage","min","max","yen","collectedIds","setCollectedIds","Set","executedQuery","setExecutedQuery","totalItems","setTotalItems","trim","searchProducts","res","getMyCollect","data","code","Array","isArray","ids","map","g","goodsId","filter","id","e","toggleCollect","has","cancelCollect","prev","next","delete","collect","add","alert","ensureGoodsIdAndCollect","product","token","localStorage","getItem","payload","goodsName","goodsPrice","goodsLink","imgUrl","mallType","status","addRes","addAndReturn","newId","ensureGoodsIdAndHistory","console","log","addHistory","searchQuery","response","compareGoods","responseData","processedData","length","group","goodsList","lowestPrice","lowestPlatform","lowestProduct","reduce","lowest","current","getPlatformName","localRes","getGoodsPage","undefined","_localRes$data$data","_localRes$data$data2","records","total","err","searchRes","searchGoods","list","fallbackErr","handleSearch","preventDefault","allProducts","flatMap","filteredProducts","p","minOk","isNaN","Number","maxOk","validData","totalPages","Math","ceil","currentPageProducts","slice","goPrev","goNext","onChangePageSize","size","selectedProducts","setSelectedProducts","compareModalOpen","setCompareModalOpen","getProductKey","isSelected","key","some","sp","toggleSelect","className","children","type","placeholder","value","onChange","target","fileName","_jsxFileName","lineNumber","columnNumber","onClick","disabled","index","src","alt","onError","href","rel","toLocaleString","checked","style","pointerEvents","idx","stopPropagation","_c","$RefreshReg$"],"sources":["C:/Users/3jz/Desktop/HJZDM/frontend/hjzdm-frontend/src/pages/ComparePage.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useSearchParams } from 'react-router-dom';\nimport './ComparePage.css';\nimport { goodsApi, userApi, goodsOperateApi } from '../services/api';\n\ninterface Product {\n  goodsId?: number;\n  goodsName: string;\n  goodsPrice: number;\n  goodsLink: string;\n  imgUrl?: string;\n  mallType: number;\n}\n\ninterface CompareGroup {\n  goodsName: string;\n  goodsList: Product[];\n  lowestPrice: number | null;\n  lowestPlatform?: string;\n}\n\nconst ComparePage: React.FC = () => {\n  const [searchParams] = useSearchParams();\n  const [query, setQuery] = useState(searchParams.get('query') || '');\n  const [compareGroups, setCompareGroups] = useState<CompareGroup[]>([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [minPrice, setMinPrice] = useState('');\n  const [maxPrice, setMaxPrice] = useState('');\n  const [currentPage, setCurrentPage] = useState(1);\n  const [pageSize, setPageSize] = useState(50);\n  \n  // Japanese Labels\n  const labels = {\n    title: '商品価格比較',\n    searchPlaceholder: '商品名、型番、キーワードを入力...',\n    searchBtn: '検索',\n    searching: '検索中...',\n    noResults: '関連商品が見つかりません',\n    filters: '絞り込み',\n    priceRange: '価格帯',\n    platforms: '販売サイト',\n    sort: '並び替え',\n    sortPriceAsc: '価格が安い順',\n    sortPriceDesc: '価格が高い順',\n    sortPlatform: 'サイト順',\n    goToShop: 'サイトへ',\n    trend: '価格推移',\n    compare: '比較する',\n    prevPage: '前へ',\n    nextPage: '次へ',\n    min: '下限',\n    max: '上限',\n    yen: '円'\n  };\n\n  const [collectedIds, setCollectedIds] = useState<Set<number>>(new Set());\n\n  // Search Source\n  const [executedQuery, setExecutedQuery] = useState('');\n  const [totalItems, setTotalItems] = useState(0);\n\n  // 仅在页面加载时，如果有URL参数，则执行搜索\n  useEffect(() => {\n    if (query.trim()) {\n      searchProducts(query);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  useEffect(() => {\n    (async () => {\n      try {\n        const res = await goodsApi.getMyCollect(1, 500);\n        if (res.data && res.data.code === 200 && Array.isArray(res.data.data)) {\n          const ids = res.data.data.map((g: any) => g.goodsId).filter((id: any) => typeof id === 'number');\n          setCollectedIds(new Set(ids));\n        }\n      } catch (e) {\n      }\n    })();\n  }, []);\n\n  const toggleCollect = async (goodsId: number) => {\n    try {\n      if (collectedIds.has(goodsId)) {\n        const res = await goodsOperateApi.cancelCollect(goodsId);\n        if (res.data && res.data.code === 200) {\n          setCollectedIds(prev => {\n            const next = new Set(prev);\n            next.delete(goodsId);\n            return next;\n          });\n        }\n      } else {\n        const res = await goodsOperateApi.collect(goodsId);\n        if (res.data && res.data.code === 200) {\n          setCollectedIds(prev => {\n            const next = new Set(prev);\n            next.add(goodsId);\n            return next;\n          });\n        } else {\n          alert('请先登录');\n        }\n      }\n    } catch (e) {\n      alert('操作失败');\n    }\n  };\n\n  const ensureGoodsIdAndCollect = async (product: Product) => {\n    try {\n      const token = localStorage.getItem('token');\n      if (!token) {\n        alert('请先登录');\n        return;\n      }\n      if (product.goodsId) {\n        await toggleCollect(product.goodsId);\n        return;\n      }\n      const payload: any = {\n        goodsName: product.goodsName,\n        goodsPrice: product.goodsPrice,\n        goodsLink: product.goodsLink,\n        imgUrl: product.imgUrl,\n        mallType: product.mallType,\n        status: 1\n      };\n      const addRes = await goodsApi.addAndReturn(payload);\n      if (addRes.data && addRes.data.code === 200 && addRes.data.data && addRes.data.data.goodsId) {\n        const newId = addRes.data.data.goodsId as number;\n        await toggleCollect(newId);\n      } else {\n        alert('新增商品失败');\n      }\n    } catch (e) {\n      alert('操作失败');\n    }\n  };\n\n  const ensureGoodsIdAndHistory = async (product: Product) => {\n    try {\n      const token = localStorage.getItem('token');\n      if (!token) {\n        alert('请先登录，才能记录浏览历史');\n        return;\n      }\n      console.log('ensureGoodsIdAndHistory called for goods:', product.goodsName, 'goodsId:', product.goodsId);\n      if (product.goodsId) {\n        const res = await userApi.addHistory(product.goodsId);\n        console.log('addHistory response:', res.data);\n        return;\n      }\n      const payload: any = {\n        goodsName: product.goodsName,\n        goodsPrice: product.goodsPrice,\n        goodsLink: product.goodsLink,\n        imgUrl: product.imgUrl,\n        mallType: product.mallType,\n        status: 1\n      };\n      const addRes = await goodsApi.addAndReturn(payload);\n      console.log('addAndReturn response:', addRes.data);\n      if (addRes.data && addRes.data.code === 200 && addRes.data.data && addRes.data.data.goodsId) {\n        const newId = addRes.data.data.goodsId as number;\n        const res = await userApi.addHistory(newId);\n        console.log('addHistory after add response:', res.data);\n      }\n    } catch (e) {\n      console.error('ensureGoodsIdAndHistory error:', e);\n    }\n  };\n\n  const searchProducts = async (searchQuery: string) => {\n    if (!searchQuery.trim()) return;\n    \n    setExecutedQuery(searchQuery);\n    setLoading(true);\n    setError(null);\n    \n    try {\n      const response = await goodsApi.compareGoods(searchQuery);\n      \n      let responseData = [];\n      if (response.data && response.data.data) {\n        responseData = Array.isArray(response.data.data) ? response.data.data : [response.data.data];\n      }\n      \n      let processedData: any[] = [];\n      \n      if (responseData.length > 0) {\n        processedData = responseData.map((group: any) => {\n          const goodsList = Array.isArray(group.goodsList) ? group.goodsList : [];\n          \n          let lowestPrice = null;\n          let lowestPlatform = '不明';\n          \n          if (goodsList.length > 0) {\n            const lowestProduct = goodsList.reduce((lowest: any, current: any) => \n              current.goodsPrice < lowest.goodsPrice ? current : lowest, goodsList[0]);\n            \n            lowestPrice = lowestProduct.goodsPrice;\n            lowestPlatform = getPlatformName(lowestProduct.mallType);\n          }\n          \n          return {\n            goodsName: group.goodsName || '不明な商品',\n            goodsList: goodsList.map((product: any) => ({\n              goodsId: product.goodsId,\n              goodsName: product.goodsName,\n              goodsPrice: product.goodsPrice,\n              goodsLink: product.goodsLink,\n              imgUrl: product.imgUrl,\n              mallType: product.mallType\n            })),\n            lowestPrice: lowestPrice,\n            lowestPlatform: lowestPlatform\n          };\n        });\n      }\n\n      // Fallback: if compare returns empty, try local catalog search\n      if (processedData.length === 0) {\n        try {\n          const localRes = await goodsApi.getGoodsPage(searchQuery, {}, undefined, 1, 50);\n          if (localRes.data && localRes.data.code === 200) {\n            const records = localRes.data.data?.records || [];\n            setTotalItems(localRes.data.data?.total || 0);\n            processedData = records.map((g: any) => ({\n              goodsName: g.goodsName,\n              goodsList: [{\n                goodsId: g.goodsId,\n                goodsName: g.goodsName,\n                goodsPrice: g.goodsPrice,\n                goodsLink: g.goodsLink || '#',\n                imgUrl: g.imgUrl,\n                mallType: g.mallType || 0\n              }],\n              lowestPrice: g.goodsPrice,\n              lowestPlatform: getPlatformName(g.mallType || 0)\n            }));\n          }\n        } catch (e) {\n        }\n      }\n      \n      setCompareGroups(processedData);\n      setLoading(false);\n    } catch (err) {\n      try {\n        let processedData: any[] = [];\n        const searchRes = await goodsApi.searchGoods(searchQuery);\n        const list = (searchRes.data && searchRes.data.data)\n          ? (Array.isArray(searchRes.data.data) ? searchRes.data.data : [searchRes.data.data])\n          : [];\n        processedData = list.map((g: any) => ({\n          goodsName: g.goodsName,\n          goodsList: [{\n            goodsId: g.goodsId,\n            goodsName: g.goodsName,\n            goodsPrice: g.goodsPrice,\n            goodsLink: g.goodsLink || '#',\n            imgUrl: g.imgUrl,\n            mallType: g.mallType || 0\n          }],\n          lowestPrice: g.goodsPrice,\n          lowestPlatform: getPlatformName(g.mallType || 0)\n        }));\n        setCompareGroups(processedData);\n      } catch (fallbackErr) {\n        setError('検索に失敗しました。後ほど再試行してください');\n      } finally {\n        setLoading(false);\n      }\n    }\n  };\n\n  const handleSearch = (e: React.FormEvent) => {\n    e.preventDefault();\n    if (query.trim()) {\n      searchProducts(query);\n    }\n  };\n\n  const getPlatformName = (mallType: number): string => {\n    switch (mallType) {\n      case 10: return '楽天';\n      case 20: return 'Yahoo!';\n      case 40: return 'Amazon';\n      default: return '其他';\n    }\n  };\n\n  const allProducts: Product[] = compareGroups.flatMap(group => group.goodsList);\n\n  const filteredProducts: Product[] = allProducts.filter(p => {\n    const minOk = minPrice === '' || (!isNaN(Number(minPrice)) && p.goodsPrice >= Number(minPrice));\n    const maxOk = maxPrice === '' || (!isNaN(Number(maxPrice)) && p.goodsPrice <= Number(maxPrice));\n    const validData = p.goodsPrice > 0 && p.goodsLink && p.goodsLink !== '#' && p.goodsLink !== '';\n    return minOk && maxOk && validData;\n  });\n\n  const totalPages = Math.max(1, Math.ceil(filteredProducts.length / pageSize));\n  \n  const currentPageProducts = filteredProducts.slice((currentPage - 1) * pageSize, currentPage * pageSize);\n  const goPrev = () => setCurrentPage(p => Math.max(1, p - 1));\n  const goNext = () => setCurrentPage(p => Math.min(totalPages, p + 1));\n  const onChangePageSize = (size: number) => { setPageSize(size); setCurrentPage(1); };\n\n  const [selectedProducts, setSelectedProducts] = useState<Product[]>([]);\n  const [compareModalOpen, setCompareModalOpen] = useState(false);\n\n  // ... (existing code)\n\n  const getProductKey = (p: Product) => {\n    if (p.goodsId) return `id:${p.goodsId}`;\n    return `link:${p.goodsLink}`;\n  };\n\n  const isSelected = (p: Product) => {\n    const key = getProductKey(p);\n    return selectedProducts.some(sp => getProductKey(sp) === key);\n  };\n\n  const toggleSelect = (p: Product) => {\n    const key = getProductKey(p);\n    if (isSelected(p)) {\n      setSelectedProducts(prev => prev.filter(sp => getProductKey(sp) !== key));\n    } else {\n      if (selectedProducts.length >= 4) {\n        alert('最大4件まで比較可能です');\n        return;\n      }\n      setSelectedProducts(prev => [...prev, p]);\n    }\n  };\n\n  return (\n    <div className=\"compare-page\">\n      {/* Search Section */}\n      <div className=\"search-section\">\n        <div className=\"search-box\">\n          <input\n            type=\"text\"\n            className=\"search-input\"\n            placeholder={labels.searchPlaceholder}\n            value={query}\n            onChange={(e) => setQuery(e.target.value)}\n          />\n          <button className=\"search-btn\" onClick={handleSearch} disabled={loading}>\n            {loading ? labels.searching : labels.searchBtn}\n          </button>\n        </div>\n      </div>\n\n      {!loading && !error && (\n        <div className=\"compare-container\">\n           {/* Sidebar */}\n           <div className=\"filter-sidebar\">\n             <div className=\"filter-group\">\n               <h3>{labels.priceRange}</h3>\n               <div className=\"price-inputs\">\n                 <input\n                   type=\"number\"\n                   placeholder={labels.min}\n                   value={minPrice}\n                   onChange={(e) => setMinPrice(e.target.value)}\n                 />\n                 <span>-</span>\n                 <input\n                   type=\"number\"\n                   placeholder={labels.max}\n                   value={maxPrice}\n                   onChange={(e) => setMaxPrice(e.target.value)}\n                 />\n               </div>\n             </div>\n           </div>\n           \n           <div className=\"main-content\">\n             <div className=\"results-header\">\n               <div className=\"results-count\">\n                 {totalItems} 件の検索結果\n               </div>\n               <div className=\"sort-controls\">\n                 {/* Sort removed */}\n               </div>\n             </div>\n             \n             <div className=\"product-list-view\">\n              {currentPageProducts.map((product, index) => (\n                <div key={index} className=\"product-row\">\n                  <div className=\"p-img\">\n                    <img src={product.imgUrl || 'https://placehold.co/160x160'} alt={product.goodsName} onError={(e) => (e.target as HTMLImageElement).src = 'https://placehold.co/160x160'} />\n                  </div>\n                  <div className=\"p-info\">\n                    <div className=\"p-title\" title={product.goodsName}>\n                      <a href={product.goodsLink} target=\"_blank\" rel=\"noopener noreferrer\">\n                        {product.goodsName}\n                      </a>\n                    </div>\n                    <div className=\"p-meta\">\n                      <span className={`mall-tag mall-${product.mallType}`}>{getPlatformName(product.mallType)}</span>\n                    </div>\n                  </div>\n                  <div className=\"p-price-area\">\n                    <div className=\"p-price\">\n                      ¥{product.goodsPrice.toLocaleString()}\n                    </div>\n                  </div>\n                  <div className=\"p-action\">\n                    <a href={product.goodsLink} target=\"_blank\" rel=\"noopener noreferrer\" className=\"btn-shop\">\n                      {labels.goToShop}\n                    </a>\n                    <label className=\"compare-check\" onClick={(e) => { e.preventDefault(); toggleSelect(product); }}>\n                      <input \n                        type=\"checkbox\" \n                        checked={isSelected(product)} \n                        onChange={() => {}} // Handled by label onClick\n                        style={{ pointerEvents: 'none' }}\n                      /> {labels.compare}\n                    </label>\n                  </div>\n                </div>\n              ))}\n            </div>\n            \n            <div className=\"pagination\">\n              <button \n                onClick={goPrev} \n                disabled={currentPage === 1}\n                className=\"page-btn\"\n              >\n                {labels.prevPage}\n              </button>\n              <span className=\"page-info\">{currentPage} / {totalPages}</span>\n              <button \n                onClick={goNext} \n                disabled={currentPage === totalPages}\n                className=\"page-btn\"\n              >\n                {labels.nextPage}\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Floating Dock starts here */}\n      {selectedProducts.length > 0 && !compareModalOpen && (\n        <div className=\"floating-dock\">\n          <div className=\"dock-content\">\n            <div className=\"selected-items-row\">\n              {selectedProducts.map((p, idx) => (\n                <div key={idx} className=\"dock-item\">\n                  <img src={p.imgUrl || 'https://placehold.co/60x60'} alt={p.goodsName} onError={(e) => (e.target as HTMLImageElement).src = 'https://placehold.co/60x60'} />\n                  <button className=\"remove-item-btn\" onClick={() => toggleSelect(p)}>×</button>\n                </div>\n              ))}\n            </div>\n            <div className=\"dock-actions\">\n              <button className=\"btn-clear\" onClick={() => setSelectedProducts([])}>クリア</button>\n              <button className=\"btn-compare-start\" onClick={() => setCompareModalOpen(true)}>比較する ({selectedProducts.length})</button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Comparison Modal */}\n      {compareModalOpen && (\n        <div className=\"compare-modal-overlay\" onClick={() => setCompareModalOpen(false)}>\n          <div className=\"compare-modal\" onClick={e => e.stopPropagation()}>\n            <div className=\"modal-header-row\">\n              <h2>商品比較</h2>\n              <button className=\"modal-close\" onClick={() => setCompareModalOpen(false)}>×</button>\n            </div>\n            <div className=\"modal-table-container\">\n              <table className=\"compare-table\">\n                <tbody>\n                  {/* Image Row */}\n                  <tr>\n                    <th>商品</th>\n                    {selectedProducts.map((p, idx) => (\n                      <td key={idx} className=\"compare-col\">\n                        <div className=\"col-header\">\n                          <img src={p.imgUrl || 'https://placehold.co/120x120'} alt={p.goodsName} className=\"col-img\" onError={(e) => (e.target as HTMLImageElement).src = 'https://placehold.co/120x120'} />\n                          <div className=\"col-title\" title={p.goodsName}>{p.goodsName}</div>\n                          <button className=\"col-remove\" onClick={() => toggleSelect(p)}>×</button>\n                        </div>\n                      </td>\n                    ))}\n                  </tr>\n                  {/* Price Row */}\n                  <tr>\n                    <th>価格</th>\n                    {selectedProducts.map((p, idx) => (\n                      <td key={idx} className=\"compare-col\">\n                        <div className=\"col-price\">¥{p.goodsPrice.toLocaleString()}</div>\n                      </td>\n                    ))}\n                  </tr>\n                  {/* Platform Row */}\n                  <tr>\n                    <th>販売サイト</th>\n                    {selectedProducts.map((p, idx) => (\n                      <td key={idx} className=\"compare-col\">\n                        <span className={`mall-tag mall-${p.mallType}`}>{getPlatformName(p.mallType)}</span>\n                      </td>\n                    ))}\n                  </tr>\n                  {/* Dynamic Facets Rows removed */}\n                  {/* Action Row */}\n                  <tr>\n                    <th>操作</th>\n                    {selectedProducts.map((p, idx) => (\n                      <td key={idx} className=\"compare-col\">\n                        <a href={p.goodsLink} target=\"_blank\" rel=\"noopener noreferrer\" className=\"col-action\">サイトへ</a>\n                      </td>\n                    ))}\n                  </tr>\n                </tbody>\n              </table>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Trend Modal removed */}\n\n      {!loading && !error && compareGroups.length === 0 && query && (\n        <div className=\"no-results\">関連商品が見つかりません</div>\n      )}\n    </div>\n  );\n};\n\nexport default ComparePage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}