{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\3jz\\\\Desktop\\\\HJZDM\\\\frontend\\\\hjzdm-frontend\\\\src\\\\pages\\\\ProfilePage.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { goodsApi, userApi, disclosureApi, notificationApi, commonApi } from '../services/api';\nimport { useNavigate } from 'react-router-dom';\nimport UserSidebar from '../components/UserSidebar';\nimport './ProfilePage.css';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst ProfilePage = () => {\n  _s();\n  const navigate = useNavigate();\n  const isAdmin = (() => {\n    const token = localStorage.getItem('token');\n    if (!token) return false;\n    try {\n      const payload = JSON.parse(atob(token.split('.')[1]));\n      return (payload === null || payload === void 0 ? void 0 : payload.userId) === 1;\n    } catch {\n      return false;\n    }\n  })();\n  const [profile, setProfile] = useState(null);\n  const [errorMsg, setErrorMsg] = useState(null);\n  const [featureCounts, setFeatureCounts] = useState([{\n    id: 1,\n    name: '„Éû„Ç§„Ç≥„É¨„ÇØ„Ç∑„Éß„É≥',\n    icon: '‚ù§Ô∏è',\n    count: 0,\n    desc: '„ÅäÊ∞ó„Å´ÂÖ•„Çä„ÅÆÂïÜÂìÅ'\n  }, {\n    id: 2,\n    name: 'Èñ≤Ë¶ßÂ±•Ê≠¥',\n    icon: 'üïí',\n    count: 0,\n    desc: 'ÊúÄËøëË¶ã„ÅüÂïÜÂìÅ'\n  }, {\n    id: 4,\n    name: '„Éû„Ç§„Éí„É≥„Éà',\n    icon: 'üí°',\n    count: 0,\n    desc: 'ÊäïÁ®ø„Åó„Åü„Éí„É≥„Éà'\n  }, {\n    id: 5,\n    name: 'ÈÄöÁü•',\n    icon: 'üîî',\n    count: 0,\n    desc: 'Êñ∞ÁùÄ„É°„ÉÉ„Çª„Éº„Ç∏'\n  }]);\n  const [isEditing, setIsEditing] = useState(false);\n  const [editForm, setEditForm] = useState({\n    nickName: '',\n    age: '',\n    avatar: ''\n  });\n\n  // Japanese Labels\n  const labels = {\n    title: '„Éû„Ç§„Éö„Éº„Ç∏',\n    editProfile: '„Éó„É≠„Éï„Ç£„Éº„É´Á∑®ÈõÜ',\n    save: 'Â§âÊõ¥„Çí‰øùÂ≠ò',\n    cancel: '„Ç≠„É£„É≥„Çª„É´',\n    name: '„Éã„ÉÉ„ÇØ„Éç„Éº„É†',\n    age: 'Âπ¥ÈΩ¢',\n    avatar: '„Éó„É≠„Éï„Ç£„Éº„É´ÁîªÂÉè',\n    upload: 'ÁîªÂÉè„Çí„Ç¢„ÉÉ„Éó„É≠„Éº„Éâ',\n    admin: 'ÁÆ°ÁêÜËÄÖ„É°„Éã„É•„Éº',\n    review: 'ÊäïÁ®øÂØ©ÊüªÁÆ°ÁêÜ',\n    email: '„É°„Éº„É´„Ç¢„Éâ„É¨„Çπ'\n  };\n\n  // „É¶„Éº„Ç∂„Éº„Éá„Éº„Çø„ÅÆË™≠„ÅøËæº„Åø\n  useEffect(() => {\n    loadUserData();\n  }, []);\n  const loadUserData = async () => {\n    try {\n      var _meRes$data, _collectRes$data, _collectRes$data$data, _collectRes$data2, _historyRes$data, _historyRes$data$data, _historyRes$data2, _tipRes$data, _tipRes$data$data, _tipRes$data2, _notiRes$data;\n      const meRes = await userApi.getProfile();\n      const me = meRes === null || meRes === void 0 ? void 0 : (_meRes$data = meRes.data) === null || _meRes$data === void 0 ? void 0 : _meRes$data.data;\n      if (me) {\n        setProfile({\n          name: me.nickName || me.username || `„É¶„Éº„Ç∂„Éº${me.id}`,\n          avatar: me.avatar,\n          email: me.email\n        });\n        setEditForm({\n          nickName: me.nickName || me.username || '',\n          age: me.age ? String(me.age) : '',\n          avatar: me.avatar || ''\n        });\n      }\n\n      // Âπ∂Ë°åËé∑ÂèñÂêÑÊ®°ÂùóÊï∞ÊçÆÊï∞Èáè\n      const [collectRes, historyRes, tipRes, notiRes] = await Promise.all([goodsApi.getMyCollect(1, 1), userApi.getHistory(1, 1), disclosureApi.getMyDisclosure(1, 1), notificationApi.getMyNotifications()]);\n      const collectCount = (collectRes === null || collectRes === void 0 ? void 0 : (_collectRes$data = collectRes.data) === null || _collectRes$data === void 0 ? void 0 : (_collectRes$data$data = _collectRes$data.data) === null || _collectRes$data$data === void 0 ? void 0 : _collectRes$data$data.total) || (Array.isArray(collectRes === null || collectRes === void 0 ? void 0 : (_collectRes$data2 = collectRes.data) === null || _collectRes$data2 === void 0 ? void 0 : _collectRes$data2.data) ? collectRes.data.data.length : 0);\n      const historyCount = (historyRes === null || historyRes === void 0 ? void 0 : (_historyRes$data = historyRes.data) === null || _historyRes$data === void 0 ? void 0 : (_historyRes$data$data = _historyRes$data.data) === null || _historyRes$data$data === void 0 ? void 0 : _historyRes$data$data.total) || (Array.isArray(historyRes === null || historyRes === void 0 ? void 0 : (_historyRes$data2 = historyRes.data) === null || _historyRes$data2 === void 0 ? void 0 : _historyRes$data2.data) ? historyRes.data.data.length : 0);\n      const tipCount = (tipRes === null || tipRes === void 0 ? void 0 : (_tipRes$data = tipRes.data) === null || _tipRes$data === void 0 ? void 0 : (_tipRes$data$data = _tipRes$data.data) === null || _tipRes$data$data === void 0 ? void 0 : _tipRes$data$data.total) || (Array.isArray(tipRes === null || tipRes === void 0 ? void 0 : (_tipRes$data2 = tipRes.data) === null || _tipRes$data2 === void 0 ? void 0 : _tipRes$data2.data) ? tipRes.data.data.length : 0);\n      const notiList = (notiRes === null || notiRes === void 0 ? void 0 : (_notiRes$data = notiRes.data) === null || _notiRes$data === void 0 ? void 0 : _notiRes$data.data) || [];\n      const unreadList = notiList.filter(n => n.isRead === 0);\n      let notiCount = 0;\n      if (unreadList.length > 0) {\n        const latestMsg = unreadList[0];\n        const latestTime = new Date(latestMsg.createTime).getTime();\n        const lastCheck = parseInt(localStorage.getItem('last_notification_check_time') || '0');\n        if (latestTime > lastCheck) {\n          notiCount = unreadList.length;\n        }\n      }\n      setFeatureCounts(prev => prev.map(item => {\n        if (item.id === 1) return {\n          ...item,\n          count: collectCount\n        };\n        if (item.id === 2) return {\n          ...item,\n          count: historyCount\n        };\n        if (item.id === 4) return {\n          ...item,\n          count: tipCount\n        };\n        if (item.id === 5) return {\n          ...item,\n          count: notiCount\n        };\n        return item;\n      }));\n    } catch (error) {\n      console.warn('„É¶„Éº„Ç∂„Éº„Éá„Éº„Çø„ÅÆË™≠„ÅøËæº„Åø„Å´Â§±Êïó:', error);\n    }\n  };\n  const handleUpdateProfile = async e => {\n    e.preventDefault();\n    try {\n      await userApi.updateProfile({\n        nickName: editForm.nickName,\n        age: editForm.age ? parseInt(editForm.age) : undefined,\n        avatar: editForm.avatar\n      });\n      setIsEditing(false);\n      loadUserData();\n    } catch (err) {\n      alert('Êõ¥Êñ∞„Å´Â§±Êïó„Åó„Åæ„Åó„Åü');\n    }\n  };\n  const handleAvatarUpload = async files => {\n    if (!files || !files[0]) return;\n    try {\n      const res = await commonApi.upload(files[0]);\n      if (res.data && res.data.code === 200) {\n        setEditForm(prev => ({\n          ...prev,\n          avatar: res.data.data\n        }));\n      }\n    } catch (e) {\n      console.error(e);\n      alert('„Ç¢„ÉÉ„Éó„É≠„Éº„ÉâÂ§±Êïó');\n    }\n  };\n  const handleFeatureClick = id => {\n    switch (id) {\n      case 1:\n        navigate('/my-collection');\n        break;\n      case 2:\n        navigate('/browse-history');\n        break;\n      case 4:\n        navigate('/my-tip');\n        break;\n      case 5:\n        localStorage.setItem('last_notification_check_time', Date.now().toString());\n        navigate('/notifications');\n        break;\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"profile-container\",\n    children: [/*#__PURE__*/_jsxDEV(UserSidebar, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"profile-main\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"profile-header-card\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"profile-cover\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"profile-info-row\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"profile-avatar-wrapper\",\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              src: (profile === null || profile === void 0 ? void 0 : profile.avatar) || 'https://placehold.co/120x120',\n              alt: \"Avatar\",\n              className: \"profile-avatar-lg\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 164,\n              columnNumber: 15\n            }, this), isEditing && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"avatar-upload-overlay\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"avatar-upload\",\n                className: \"upload-icon\",\n                children: \"\\uD83D\\uDCF7\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 171,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                id: \"avatar-upload\",\n                type: \"file\",\n                accept: \"image/*\",\n                onChange: e => handleAvatarUpload(e.target.files),\n                style: {\n                  display: 'none'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 172,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 170,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 163,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"profile-text\",\n            children: !isEditing ? /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n                className: \"profile-name\",\n                children: profile === null || profile === void 0 ? void 0 : profile.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 186,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"profile-email\",\n                children: (profile === null || profile === void 0 ? void 0 : profile.email) || '„É°„Éº„É´„Ç¢„Éâ„É¨„ÇπÊú™Ë®≠ÂÆö'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 187,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"profile-tags\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"profile-tag\",\n                  children: \"\\u4E00\\u822C\\u30E6\\u30FC\\u30B6\\u30FC\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 189,\n                  columnNumber: 22\n                }, this), isAdmin && /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"profile-tag admin-tag\",\n                  children: \"\\u7BA1\\u7406\\u8005\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 190,\n                  columnNumber: 34\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 188,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true) : /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"profile-edit-fields\",\n              children: /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                className: \"edit-input-lg\",\n                value: editForm.nickName,\n                placeholder: labels.name,\n                onChange: e => setEditForm({\n                  ...editForm,\n                  nickName: e.target.value\n                })\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 195,\n                columnNumber: 20\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 194,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 183,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"profile-actions\",\n            children: !isEditing ? /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn-modern-primary\",\n              onClick: () => setIsEditing(true),\n              children: labels.editProfile\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 208,\n              columnNumber: 17\n            }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"edit-actions\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn-modern-text\",\n                onClick: () => setIsEditing(false),\n                children: labels.cancel\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 213,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn-modern-primary\",\n                onClick: handleUpdateProfile,\n                children: labels.save\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 216,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 212,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 206,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 11\n        }, this), isEditing && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"profile-edit-extra\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: labels.age\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 227,\n              columnNumber: 18\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"number\",\n              className: \"edit-input\",\n              value: editForm.age,\n              onChange: e => setEditForm({\n                ...editForm,\n                age: e.target.value\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 228,\n              columnNumber: 18\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 226,\n            columnNumber: 16\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 225,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"section-title\",\n        children: \"\\u30C0\\u30C3\\u30B7\\u30E5\\u30DC\\u30FC\\u30C9\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 240,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"dashboard-grid\",\n        children: featureCounts.map(feature => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"dashboard-card\",\n          onClick: () => handleFeatureClick(feature.id),\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card-icon-wrapper\",\n            children: [feature.icon, feature.id === 5 && feature.count > 0 && /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"badge-dot\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 250,\n              columnNumber: 59\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 248,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card-content\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"card-count\",\n              children: feature.count\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 253,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"card-title\",\n              children: feature.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 254,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"card-desc\",\n              children: feature.desc\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 255,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 252,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card-arrow\",\n            children: \"\\u2192\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 257,\n            columnNumber: 15\n          }, this)]\n        }, feature.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 243,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 241,\n        columnNumber: 9\n      }, this), isAdmin && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"section-title\",\n          children: \"\\u7BA1\\u7406\\u8005\\u30A8\\u30EA\\u30A2\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 265,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"admin-panel-card\",\n          onClick: () => navigate('/admin/disclosures'),\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"admin-icon\",\n            children: \"\\uD83D\\uDEE1\\uFE0F\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 267,\n            columnNumber: 16\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"admin-info\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              children: labels.review\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 269,\n              columnNumber: 18\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"\\u30E6\\u30FC\\u30B6\\u30FC\\u304B\\u3089\\u306E\\u6295\\u7A3F\\u3092\\u5BE9\\u67FB\\u30FB\\u7BA1\\u7406\\u3057\\u307E\\u3059\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 270,\n              columnNumber: 18\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 268,\n            columnNumber: 16\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn-modern-outline\",\n            children: \"\\u7BA1\\u7406\\u753B\\u9762\\u3078\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 272,\n            columnNumber: 16\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 266,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 155,\n    columnNumber: 5\n  }, this);\n};\n_s(ProfilePage, \"VfGdSkU7He/4vplRfkkMQYqXCT8=\", false, function () {\n  return [useNavigate];\n});\n_c = ProfilePage;\nexport default ProfilePage;\nvar _c;\n$RefreshReg$(_c, \"ProfilePage\");","map":{"version":3,"names":["React","useState","useEffect","goodsApi","userApi","disclosureApi","notificationApi","commonApi","useNavigate","UserSidebar","jsxDEV","_jsxDEV","Fragment","_Fragment","ProfilePage","_s","navigate","isAdmin","token","localStorage","getItem","payload","JSON","parse","atob","split","userId","profile","setProfile","errorMsg","setErrorMsg","featureCounts","setFeatureCounts","id","name","icon","count","desc","isEditing","setIsEditing","editForm","setEditForm","nickName","age","avatar","labels","title","editProfile","save","cancel","upload","admin","review","email","loadUserData","_meRes$data","_collectRes$data","_collectRes$data$data","_collectRes$data2","_historyRes$data","_historyRes$data$data","_historyRes$data2","_tipRes$data","_tipRes$data$data","_tipRes$data2","_notiRes$data","meRes","getProfile","me","data","username","String","collectRes","historyRes","tipRes","notiRes","Promise","all","getMyCollect","getHistory","getMyDisclosure","getMyNotifications","collectCount","total","Array","isArray","length","historyCount","tipCount","notiList","unreadList","filter","n","isRead","notiCount","latestMsg","latestTime","Date","createTime","getTime","lastCheck","parseInt","prev","map","item","error","console","warn","handleUpdateProfile","e","preventDefault","updateProfile","undefined","err","alert","handleAvatarUpload","files","res","code","handleFeatureClick","setItem","now","toString","className","children","fileName","_jsxFileName","lineNumber","columnNumber","src","alt","htmlFor","type","accept","onChange","target","style","display","value","placeholder","onClick","feature","_c","$RefreshReg$"],"sources":["C:/Users/3jz/Desktop/HJZDM/frontend/hjzdm-frontend/src/pages/ProfilePage.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { goodsApi, userApi, disclosureApi, notificationApi, commonApi } from '../services/api';\nimport { useNavigate } from 'react-router-dom';\nimport UserSidebar from '../components/UserSidebar';\nimport './ProfilePage.css';\n\nconst ProfilePage: React.FC = () => {\n  const navigate = useNavigate();\n\n  const isAdmin = (() => {\n    const token = localStorage.getItem('token');\n    if (!token) return false;\n    try {\n      const payload = JSON.parse(atob(token.split('.')[1]));\n      return payload?.userId === 1;\n    } catch {\n      return false;\n    }\n  })();\n  \n  const [profile, setProfile] = useState<{ name: string; avatar?: string; email?: string } | null>(null);\n  const [errorMsg, setErrorMsg] = useState<string | null>(null);\n  \n  const [featureCounts, setFeatureCounts] = useState([\n    { id: 1, name: '„Éû„Ç§„Ç≥„É¨„ÇØ„Ç∑„Éß„É≥', icon: '‚ù§Ô∏è', count: 0, desc: '„ÅäÊ∞ó„Å´ÂÖ•„Çä„ÅÆÂïÜÂìÅ' },\n    { id: 2, name: 'Èñ≤Ë¶ßÂ±•Ê≠¥', icon: 'üïí', count: 0, desc: 'ÊúÄËøëË¶ã„ÅüÂïÜÂìÅ' },\n    { id: 4, name: '„Éû„Ç§„Éí„É≥„Éà', icon: 'üí°', count: 0, desc: 'ÊäïÁ®ø„Åó„Åü„Éí„É≥„Éà' },\n    { id: 5, name: 'ÈÄöÁü•', icon: 'üîî', count: 0, desc: 'Êñ∞ÁùÄ„É°„ÉÉ„Çª„Éº„Ç∏' }\n  ]);\n  \n  const [isEditing, setIsEditing] = useState(false);\n  const [editForm, setEditForm] = useState({\n    nickName: '',\n    age: '',\n    avatar: ''\n  });\n\n  // Japanese Labels\n  const labels = {\n    title: '„Éû„Ç§„Éö„Éº„Ç∏',\n    editProfile: '„Éó„É≠„Éï„Ç£„Éº„É´Á∑®ÈõÜ',\n    save: 'Â§âÊõ¥„Çí‰øùÂ≠ò',\n    cancel: '„Ç≠„É£„É≥„Çª„É´',\n    name: '„Éã„ÉÉ„ÇØ„Éç„Éº„É†',\n    age: 'Âπ¥ÈΩ¢',\n    avatar: '„Éó„É≠„Éï„Ç£„Éº„É´ÁîªÂÉè',\n    upload: 'ÁîªÂÉè„Çí„Ç¢„ÉÉ„Éó„É≠„Éº„Éâ',\n    admin: 'ÁÆ°ÁêÜËÄÖ„É°„Éã„É•„Éº',\n    review: 'ÊäïÁ®øÂØ©ÊüªÁÆ°ÁêÜ',\n    email: '„É°„Éº„É´„Ç¢„Éâ„É¨„Çπ'\n  };\n  \n  // „É¶„Éº„Ç∂„Éº„Éá„Éº„Çø„ÅÆË™≠„ÅøËæº„Åø\n  useEffect(() => {\n    loadUserData();\n  }, []);\n  \n  const loadUserData = async () => {\n    try {\n      const meRes = await userApi.getProfile();\n      const me = meRes?.data?.data;\n      if (me) {\n        setProfile({ \n            name: me.nickName || me.username || `„É¶„Éº„Ç∂„Éº${me.id}`, \n            avatar: me.avatar,\n            email: me.email\n        });\n        setEditForm({\n          nickName: me.nickName || me.username || '',\n          age: me.age ? String(me.age) : '',\n          avatar: me.avatar || ''\n        });\n      }\n      \n      // Âπ∂Ë°åËé∑ÂèñÂêÑÊ®°ÂùóÊï∞ÊçÆÊï∞Èáè\n      const [collectRes, historyRes, tipRes, notiRes] = await Promise.all([\n        goodsApi.getMyCollect(1, 1),\n        userApi.getHistory(1, 1),\n        disclosureApi.getMyDisclosure(1, 1),\n        notificationApi.getMyNotifications()\n      ]);\n\n      const collectCount = collectRes?.data?.data?.total || (Array.isArray(collectRes?.data?.data) ? collectRes.data.data.length : 0);\n      const historyCount = historyRes?.data?.data?.total || (Array.isArray(historyRes?.data?.data) ? historyRes.data.data.length : 0);\n      const tipCount = tipRes?.data?.data?.total || (Array.isArray(tipRes?.data?.data) ? tipRes.data.data.length : 0);\n      \n      const notiList = notiRes?.data?.data || [];\n      const unreadList = notiList.filter((n: any) => n.isRead === 0);\n      \n      let notiCount = 0;\n      if (unreadList.length > 0) {\n        const latestMsg = unreadList[0];\n        const latestTime = new Date(latestMsg.createTime).getTime();\n        const lastCheck = parseInt(localStorage.getItem('last_notification_check_time') || '0');\n        if (latestTime > lastCheck) {\n          notiCount = unreadList.length;\n        }\n      }\n      \n      setFeatureCounts(prev => \n        prev.map(item => {\n          if (item.id === 1) return { ...item, count: collectCount };\n          if (item.id === 2) return { ...item, count: historyCount };\n          if (item.id === 4) return { ...item, count: tipCount };\n          if (item.id === 5) return { ...item, count: notiCount };\n          return item;\n        })\n      );\n    } catch (error) {\n      console.warn('„É¶„Éº„Ç∂„Éº„Éá„Éº„Çø„ÅÆË™≠„ÅøËæº„Åø„Å´Â§±Êïó:', error);\n    }\n  };\n\n  const handleUpdateProfile = async (e: React.FormEvent) => {\n    e.preventDefault();\n    try {\n      await userApi.updateProfile({\n        nickName: editForm.nickName,\n        age: editForm.age ? parseInt(editForm.age) : undefined,\n        avatar: editForm.avatar\n      });\n      setIsEditing(false);\n      loadUserData();\n    } catch (err) {\n      alert('Êõ¥Êñ∞„Å´Â§±Êïó„Åó„Åæ„Åó„Åü');\n    }\n  };\n\n  const handleAvatarUpload = async (files: FileList | null) => {\n    if (!files || !files[0]) return;\n    try {\n        const res = await commonApi.upload(files[0]);\n        if (res.data && res.data.code === 200) {\n            setEditForm(prev => ({ ...prev, avatar: res.data.data }));\n        }\n    } catch (e) {\n        console.error(e);\n        alert('„Ç¢„ÉÉ„Éó„É≠„Éº„ÉâÂ§±Êïó');\n    }\n  };\n  \n  const handleFeatureClick = (id: number) => {\n    switch(id) {\n      case 1: navigate('/my-collection'); break;\n      case 2: navigate('/browse-history'); break;\n      case 4: navigate('/my-tip'); break;\n      case 5:\n        localStorage.setItem('last_notification_check_time', Date.now().toString());\n        navigate('/notifications');\n        break;\n    }\n  };\n\n  return (\n    <div className=\"profile-container\">\n      <UserSidebar />\n      \n      <div className=\"profile-main\">\n        {/* Header Section */}\n        <div className=\"profile-header-card\">\n          <div className=\"profile-cover\"></div>\n          <div className=\"profile-info-row\">\n            <div className=\"profile-avatar-wrapper\">\n              <img \n                src={profile?.avatar || 'https://placehold.co/120x120'} \n                alt=\"Avatar\" \n                className=\"profile-avatar-lg\" \n              />\n              {isEditing && (\n                <div className=\"avatar-upload-overlay\">\n                  <label htmlFor=\"avatar-upload\" className=\"upload-icon\">üì∑</label>\n                  <input \n                    id=\"avatar-upload\" \n                    type=\"file\" \n                    accept=\"image/*\" \n                    onChange={(e) => handleAvatarUpload(e.target.files)} \n                    style={{ display: 'none' }}\n                  />\n                </div>\n              )}\n            </div>\n            \n            <div className=\"profile-text\">\n              {!isEditing ? (\n                <>\n                  <h1 className=\"profile-name\">{profile?.name}</h1>\n                  <p className=\"profile-email\">{profile?.email || '„É°„Éº„É´„Ç¢„Éâ„É¨„ÇπÊú™Ë®≠ÂÆö'}</p>\n                  <div className=\"profile-tags\">\n                     <span className=\"profile-tag\">‰∏ÄËà¨„É¶„Éº„Ç∂„Éº</span>\n                     {isAdmin && <span className=\"profile-tag admin-tag\">ÁÆ°ÁêÜËÄÖ</span>}\n                  </div>\n                </>\n              ) : (\n                <div className=\"profile-edit-fields\">\n                   <input \n                      type=\"text\" \n                      className=\"edit-input-lg\"\n                      value={editForm.nickName}\n                      placeholder={labels.name}\n                      onChange={(e) => setEditForm({...editForm, nickName: e.target.value})}\n                   />\n                </div>\n              )}\n            </div>\n\n            <div className=\"profile-actions\">\n              {!isEditing ? (\n                <button className=\"btn-modern-primary\" onClick={() => setIsEditing(true)}>\n                  {labels.editProfile}\n                </button>\n              ) : (\n                <div className=\"edit-actions\">\n                  <button className=\"btn-modern-text\" onClick={() => setIsEditing(false)}>\n                    {labels.cancel}\n                  </button>\n                  <button className=\"btn-modern-primary\" onClick={handleUpdateProfile}>\n                    {labels.save}\n                  </button>\n                </div>\n              )}\n            </div>\n          </div>\n          \n          {isEditing && (\n            <div className=\"profile-edit-extra\">\n               <div className=\"form-group\">\n                 <label>{labels.age}</label>\n                 <input \n                    type=\"number\" \n                    className=\"edit-input\"\n                    value={editForm.age}\n                    onChange={(e) => setEditForm({...editForm, age: e.target.value})}\n                 />\n               </div>\n            </div>\n          )}\n        </div>\n\n        {/* Dashboard Grid */}\n        <h2 className=\"section-title\">„ÉÄ„ÉÉ„Ç∑„É•„Éú„Éº„Éâ</h2>\n        <div className=\"dashboard-grid\">\n          {featureCounts.map(feature => (\n            <div \n              key={feature.id} \n              className=\"dashboard-card\"\n              onClick={() => handleFeatureClick(feature.id)}\n            >\n              <div className=\"card-icon-wrapper\">\n                {feature.icon}\n                {feature.id === 5 && feature.count > 0 && <span className=\"badge-dot\"></span>}\n              </div>\n              <div className=\"card-content\">\n                <span className=\"card-count\">{feature.count}</span>\n                <h3 className=\"card-title\">{feature.name}</h3>\n                <p className=\"card-desc\">{feature.desc}</p>\n              </div>\n              <div className=\"card-arrow\">‚Üí</div>\n            </div>\n          ))}\n        </div>\n\n        {/* Admin Section */}\n        {isAdmin && (\n          <>\n            <h2 className=\"section-title\">ÁÆ°ÁêÜËÄÖ„Ç®„É™„Ç¢</h2>\n            <div className=\"admin-panel-card\" onClick={() => navigate('/admin/disclosures')}>\n               <div className=\"admin-icon\">üõ°Ô∏è</div>\n               <div className=\"admin-info\">\n                 <h3>{labels.review}</h3>\n                 <p>„É¶„Éº„Ç∂„Éº„Åã„Çâ„ÅÆÊäïÁ®ø„ÇíÂØ©Êüª„ÉªÁÆ°ÁêÜ„Åó„Åæ„Åô</p>\n               </div>\n               <button className=\"btn-modern-outline\">ÁÆ°ÁêÜÁîªÈù¢„Å∏</button>\n            </div>\n          </>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default ProfilePage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}