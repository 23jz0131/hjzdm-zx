{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\3jz\\\\Desktop\\\\HJZDM\\\\frontend\\\\hjzdm-frontend\\\\src\\\\pages\\\\CommunityPage.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { disclosureApi, disclosureOperateApi, commentApi } from '../services/api';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CommunityPage = () => {\n  _s();\n  const navigate = useNavigate();\n  const [disclosures, setDisclosures] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [commentMap, setCommentMap] = useState({});\n  const [commentInput, setCommentInput] = useState({});\n  const [replyTo, setReplyTo] = useState({});\n  const [openComments, setOpenComments] = useState({});\n  const [commentLoading, setCommentLoading] = useState({});\n  useEffect(() => {\n    loadDisclosures();\n  }, []);\n  const loadDisclosures = async () => {\n    try {\n      setLoading(true);\n      const res = await disclosureApi.getPublicDisclosure(1, 100);\n      setDisclosures(res.data.data || []);\n    } catch (err) {\n      console.error(err);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const ensureLogin = () => {\n    const token = localStorage.getItem('token');\n    if (!token) {\n      navigate('/login');\n      return false;\n    }\n    return true;\n  };\n  const loadComments = async disclosureId => {\n    try {\n      setCommentLoading(prev => ({\n        ...prev,\n        [disclosureId]: true\n      }));\n      const res = await commentApi.list(disclosureId);\n      const list = res.data.data || [];\n      setCommentMap(prev => ({\n        ...prev,\n        [disclosureId]: list\n      }));\n    } catch (e) {\n      console.error(e);\n    } finally {\n      setCommentLoading(prev => ({\n        ...prev,\n        [disclosureId]: false\n      }));\n    }\n  };\n  const toggleComments = disclosureId => {\n    const isOpen = openComments[disclosureId];\n    const nextOpen = !isOpen;\n    setOpenComments(prev => ({\n      ...prev,\n      [disclosureId]: nextOpen\n    }));\n    if (nextOpen && !commentMap[disclosureId]) {\n      loadComments(disclosureId);\n    }\n  };\n  const handleSubmitComment = async disclosureId => {\n    if (!ensureLogin()) return;\n    const text = (commentInput[disclosureId] || '').trim();\n    if (!text) {\n      return;\n    }\n    const replyTarget = replyTo[disclosureId];\n    try {\n      const res = await commentApi.add({\n        disclosureId,\n        content: text,\n        parentId: replyTarget ? replyTarget.id : undefined\n      });\n      if (res.data.code === 200) {\n        setCommentInput(prev => ({\n          ...prev,\n          [disclosureId]: ''\n        }));\n        setReplyTo(prev => ({\n          ...prev,\n          [disclosureId]: null\n        }));\n        // 强制重新加载评论列表\n        await loadComments(disclosureId);\n      } else {\n        alert(res.data.msg || 'コメントの投稿に失敗しました');\n      }\n    } catch (e) {\n      console.error(e);\n      alert('エラーが発生しました');\n    }\n  };\n  const handleDeleteComment = async (disclosureId, commentId) => {\n    if (!ensureLogin()) return;\n    if (!window.confirm('本当にこのコメントを削除しますか？')) {\n      return;\n    }\n    try {\n      await commentApi.del(commentId);\n      loadComments(disclosureId);\n    } catch (e) {\n      console.error(e);\n    }\n  };\n  const handleReply = (disclosureId, comment) => {\n    if (!ensureLogin()) return;\n    setReplyTo(prev => ({\n      ...prev,\n      [disclosureId]: comment\n    }));\n    setOpenComments(prev => ({\n      ...prev,\n      [disclosureId]: true\n    }));\n  };\n  const handleLike = async id => {\n    if (!ensureLogin()) return;\n    await disclosureOperateApi.like(id);\n  };\n  const handleCollect = async id => {\n    if (!ensureLogin()) return;\n    await disclosureOperateApi.collect(id);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"community-page-wrapper\",\n    style: {\n      maxWidth: '1200px',\n      margin: '20px auto',\n      padding: '0 15px'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      style: {\n        marginBottom: '20px'\n      },\n      children: \"\\u307F\\u3093\\u306A\\u306E\\u6295\\u7A3F (\\u627F\\u8A8D\\u6E08\\u307F)\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 7\n    }, this), loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"\\u8AAD\\u307F\\u8FBC\\u307F\\u4E2D...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 9\n    }, this) : disclosures.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"no-tips\",\n      children: \"\\u6295\\u7A3F\\u304C\\u307E\\u3060\\u3042\\u308A\\u307E\\u305B\\u3093\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"community-grid\",\n      style: {\n        display: 'grid',\n        gridTemplateColumns: 'repeat(auto-fill, minmax(280px, 1fr))',\n        gap: '20px'\n      },\n      children: disclosures.map(item => {\n        var _replyTo$item$disclos, _replyTo$item$disclos2;\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"community-card\",\n          style: {\n            border: '1px solid #eee',\n            borderRadius: '8px',\n            overflow: 'hidden',\n            background: '#fff',\n            boxShadow: '0 2px 4px rgba(0,0,0,0.05)'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card-image\",\n            style: {\n              height: '200px',\n              background: '#f5f5f5',\n              display: 'flex',\n              alignItems: 'center',\n              justifyContent: 'center',\n              overflow: 'hidden'\n            },\n            children: item.imgUrl ? /*#__PURE__*/_jsxDEV(\"img\", {\n              src: item.imgUrl.includes(',') ? item.imgUrl.split(',')[0] : item.imgUrl,\n              alt: item.title,\n              style: {\n                width: '100%',\n                height: '100%',\n                objectFit: 'contain'\n              },\n              onError: e => {\n                console.error('Image load failed:', e.target.src);\n                e.target.style.display = 'none';\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 158,\n              columnNumber: 19\n            }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n              style: {\n                color: '#ccc'\n              },\n              children: \"No Image\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 168,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 156,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card-content\",\n            style: {\n              padding: '15px'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              style: {\n                margin: '0 0 10px',\n                fontSize: '16px',\n                lineHeight: '1.4',\n                height: '44px',\n                overflow: 'hidden'\n              },\n              children: item.title\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 172,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                color: '#ff5000',\n                fontWeight: 'bold',\n                fontSize: '18px',\n                marginBottom: '10px'\n              },\n              children: [\"\\xA5\", item.disclosurePrice]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 173,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              style: {\n                fontSize: '13px',\n                color: '#666',\n                marginBottom: '15px',\n                height: '60px',\n                overflow: 'hidden'\n              },\n              children: item.content\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 174,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                display: 'flex',\n                justifyContent: 'space-between',\n                alignItems: 'center'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                style: {\n                  fontSize: '12px',\n                  color: '#999'\n                },\n                children: new Date(item.createTime).toLocaleDateString()\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 176,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n                href: item.link,\n                target: \"_blank\",\n                rel: \"noopener noreferrer\",\n                style: {\n                  background: '#ff5000',\n                  color: '#fff',\n                  padding: '5px 15px',\n                  borderRadius: '15px',\n                  textDecoration: 'none',\n                  fontSize: '13px'\n                },\n                children: \"\\u8A73\\u7D30\\u3078\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 177,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  display: 'flex',\n                  gap: '8px'\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => handleLike(item.disclosureId),\n                  style: {\n                    border: '1px solid #ddd',\n                    background: '#fff',\n                    padding: '5px 10px',\n                    cursor: 'pointer'\n                  },\n                  children: \"\\u70B9\\u8D5E\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 181,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => handleCollect(item.disclosureId),\n                  style: {\n                    border: '1px solid #ddd',\n                    background: '#fff',\n                    padding: '5px 10px',\n                    cursor: 'pointer'\n                  },\n                  children: \"\\u6536\\u85CF\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 182,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => toggleComments(item.disclosureId),\n                  style: {\n                    border: '1px solid #ddd',\n                    background: '#fff',\n                    padding: '5px 10px',\n                    cursor: 'pointer'\n                  },\n                  children: openComments[item.disclosureId] ? '隠す' : 'コメント'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 183,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 180,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 175,\n              columnNumber: 17\n            }, this), openComments[item.disclosureId] && /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                marginTop: '12px',\n                borderTop: '1px solid #f0f0f0',\n                paddingTop: '10px'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  marginBottom: '8px',\n                  fontSize: '13px',\n                  fontWeight: 'bold'\n                },\n                children: \"\\u30B3\\u30E1\\u30F3\\u30C8\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 193,\n                columnNumber: 21\n              }, this), commentLoading[item.disclosureId] ? /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  fontSize: '12px',\n                  color: '#999'\n                },\n                children: \"\\u8AAD\\u307F\\u8FBC\\u307F\\u4E2D...\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 195,\n                columnNumber: 23\n              }, this) : (commentMap[item.disclosureId] || []).length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  fontSize: '12px',\n                  color: '#999',\n                  padding: '8px 0'\n                },\n                children: \"\\u30B3\\u30E1\\u30F3\\u30C8\\u306F\\u307E\\u3060\\u3042\\u308A\\u307E\\u305B\\u3093\\u3002\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 197,\n                columnNumber: 23\n              }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  display: 'flex',\n                  flexDirection: 'column',\n                  gap: '8px'\n                },\n                children: (commentMap[item.disclosureId] || []).map(c => {\n                  const commentsForDisclosure = commentMap[item.disclosureId] || [];\n                  const parent = c.parentId ? commentsForDisclosure.find(p => p.id === c.parentId) : undefined;\n                  const isReply = !!parent;\n                  return /*#__PURE__*/_jsxDEV(\"div\", {\n                    style: {\n                      display: 'flex',\n                      flexDirection: 'column',\n                      padding: '6px 8px',\n                      background: '#fafafa',\n                      borderRadius: '4px'\n                    },\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      style: {\n                        display: 'flex',\n                        alignItems: 'center',\n                        marginBottom: '4px',\n                        fontSize: '12px'\n                      },\n                      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                        style: {\n                          fontWeight: 600,\n                          marginRight: '6px'\n                        },\n                        children: [c.publisher ? '投稿者 ' : '', c.nickName || '匿名']\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 216,\n                        columnNumber: 33\n                      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                        style: {\n                          color: '#999',\n                          fontSize: '11px'\n                        },\n                        children: new Date(c.createTime).toLocaleString()\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 220,\n                        columnNumber: 33\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 215,\n                      columnNumber: 31\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      style: {\n                        fontSize: '13px',\n                        marginBottom: '4px'\n                      },\n                      children: [isReply && parent ? /*#__PURE__*/_jsxDEV(\"span\", {\n                        style: {\n                          color: '#666',\n                          marginRight: '4px'\n                        },\n                        children: [\"\\u8FD4\\u4FE1 @\", parent.nickName || '匿名', \":\"]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 226,\n                        columnNumber: 35\n                      }, this) : null, /*#__PURE__*/_jsxDEV(\"span\", {\n                        children: c.content\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 230,\n                        columnNumber: 33\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 224,\n                      columnNumber: 31\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      style: {\n                        display: 'flex',\n                        gap: '8px',\n                        fontSize: '12px',\n                        color: '#0066c0'\n                      },\n                      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                        type: \"button\",\n                        onClick: () => handleReply(item.disclosureId, c),\n                        style: {\n                          border: 'none',\n                          background: 'none',\n                          padding: 0,\n                          cursor: 'pointer'\n                        },\n                        children: \"\\u8FD4\\u4FE1\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 233,\n                        columnNumber: 33\n                      }, this), c.owner && /*#__PURE__*/_jsxDEV(\"button\", {\n                        type: \"button\",\n                        onClick: () => handleDeleteComment(item.disclosureId, c.id),\n                        style: {\n                          border: 'none',\n                          background: 'none',\n                          padding: 0,\n                          cursor: 'pointer',\n                          color: '#d00'\n                        },\n                        children: \"\\u524A\\u9664\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 241,\n                        columnNumber: 35\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 232,\n                      columnNumber: 31\n                    }, this)]\n                  }, c.id, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 205,\n                    columnNumber: 29\n                  }, this);\n                })\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 199,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  marginTop: '8px'\n                },\n                children: [replyTo[item.disclosureId] && /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    fontSize: '12px',\n                    marginBottom: '4px',\n                    color: '#666'\n                  },\n                  children: [\"\\u8FD4\\u4FE1\\u5148: \", ((_replyTo$item$disclos = replyTo[item.disclosureId]) === null || _replyTo$item$disclos === void 0 ? void 0 : _replyTo$item$disclos.nickName) || '匿名', ' ', /*#__PURE__*/_jsxDEV(\"button\", {\n                    type: \"button\",\n                    onClick: () => setReplyTo(prev => ({\n                      ...prev,\n                      [item.disclosureId]: null\n                    })),\n                    style: {\n                      border: 'none',\n                      background: 'none',\n                      padding: 0,\n                      marginLeft: '4px',\n                      cursor: 'pointer',\n                      color: '#999'\n                    },\n                    children: \"\\u53D6\\u6D88\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 259,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 257,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n                  value: commentInput[item.disclosureId] || '',\n                  onChange: e => setCommentInput(prev => ({\n                    ...prev,\n                    [item.disclosureId]: e.target.value\n                  })),\n                  placeholder: replyTo[item.disclosureId] ? `返信 @${((_replyTo$item$disclos2 = replyTo[item.disclosureId]) === null || _replyTo$item$disclos2 === void 0 ? void 0 : _replyTo$item$disclos2.nickName) || '匿名'}...` : \"コメントを入力してください...\",\n                  style: {\n                    width: '100%',\n                    minHeight: '60px',\n                    padding: '6px 8px',\n                    fontSize: '13px',\n                    boxSizing: 'border-box',\n                    borderRadius: '4px',\n                    border: '1px solid #ddd'\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 268,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    textAlign: 'right',\n                    marginTop: '4px'\n                  },\n                  children: /*#__PURE__*/_jsxDEV(\"button\", {\n                    type: \"button\",\n                    onClick: () => handleSubmitComment(item.disclosureId),\n                    style: {\n                      background: '#ff5000',\n                      color: '#fff',\n                      border: 'none',\n                      padding: '5px 12px',\n                      borderRadius: '4px',\n                      cursor: 'pointer',\n                      fontSize: '13px'\n                    },\n                    children: \"\\u6295\\u7A3F\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 275,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 274,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 255,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 192,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 171,\n            columnNumber: 15\n          }, this)]\n        }, item.disclosureId, true, {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 13\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 145,\n    columnNumber: 5\n  }, this);\n};\n_s(CommunityPage, \"JyPaTL4R/gLHek/jprMorXCY1Co=\", false, function () {\n  return [useNavigate];\n});\n_c = CommunityPage;\nexport default CommunityPage;\nvar _c;\n$RefreshReg$(_c, \"CommunityPage\");","map":{"version":3,"names":["React","useState","useEffect","useNavigate","disclosureApi","disclosureOperateApi","commentApi","jsxDEV","_jsxDEV","CommunityPage","_s","navigate","disclosures","setDisclosures","loading","setLoading","commentMap","setCommentMap","commentInput","setCommentInput","replyTo","setReplyTo","openComments","setOpenComments","commentLoading","setCommentLoading","loadDisclosures","res","getPublicDisclosure","data","err","console","error","ensureLogin","token","localStorage","getItem","loadComments","disclosureId","prev","list","e","toggleComments","isOpen","nextOpen","handleSubmitComment","text","trim","replyTarget","add","content","parentId","id","undefined","code","alert","msg","handleDeleteComment","commentId","window","confirm","del","handleReply","comment","handleLike","like","handleCollect","collect","className","style","maxWidth","margin","padding","children","marginBottom","fileName","_jsxFileName","lineNumber","columnNumber","length","display","gridTemplateColumns","gap","map","item","_replyTo$item$disclos","_replyTo$item$disclos2","border","borderRadius","overflow","background","boxShadow","height","alignItems","justifyContent","imgUrl","src","includes","split","alt","title","width","objectFit","onError","target","color","fontSize","lineHeight","fontWeight","disclosurePrice","Date","createTime","toLocaleDateString","href","link","rel","textDecoration","onClick","cursor","marginTop","borderTop","paddingTop","flexDirection","c","commentsForDisclosure","parent","find","p","isReply","marginRight","publisher","nickName","toLocaleString","type","owner","marginLeft","value","onChange","placeholder","minHeight","boxSizing","textAlign","_c","$RefreshReg$"],"sources":["C:/Users/3jz/Desktop/HJZDM/frontend/hjzdm-frontend/src/pages/CommunityPage.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { disclosureApi, disclosureOperateApi, commentApi } from '../services/api';\r\n\r\ninterface Disclosure {\r\n  disclosureId: number;\r\n  title: string;\r\n  content: string;\r\n  link: string;\r\n  disclosurePrice: number;\r\n  imgUrl?: string;\r\n  createTime: string;\r\n  authorName?: string;\r\n}\r\n\r\ninterface Comment {\r\n  id: number;\r\n  parentId?: number;\r\n  disclosureId: number;\r\n  content: string;\r\n  createTime: string;\r\n  owner?: boolean;\r\n  avatarUrl?: string;\r\n  nickName?: string;\r\n  hasLike?: boolean;\r\n  status: number;\r\n  publisher?: boolean;\r\n}\r\n\r\nconst CommunityPage: React.FC = () => {\r\n  const navigate = useNavigate();\r\n  const [disclosures, setDisclosures] = useState<Disclosure[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [commentMap, setCommentMap] = useState<Record<number, Comment[]>>({});\r\n  const [commentInput, setCommentInput] = useState<Record<number, string>>({});\r\n  const [replyTo, setReplyTo] = useState<Record<number, Comment | null>>({});\r\n  const [openComments, setOpenComments] = useState<Record<number, boolean>>({});\r\n  const [commentLoading, setCommentLoading] = useState<Record<number, boolean>>({});\r\n\r\n  useEffect(() => {\r\n    loadDisclosures();\r\n  }, []);\r\n\r\n  const loadDisclosures = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const res = await disclosureApi.getPublicDisclosure(1, 100);\r\n      setDisclosures(res.data.data || []);\r\n    } catch (err) {\r\n      console.error(err);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const ensureLogin = () => {\r\n    const token = localStorage.getItem('token');\r\n    if (!token) {\r\n      navigate('/login');\r\n      return false;\r\n    }\r\n    return true;\r\n  };\r\n\r\n  const loadComments = async (disclosureId: number) => {\r\n    try {\r\n      setCommentLoading(prev => ({ ...prev, [disclosureId]: true }));\r\n      const res = await commentApi.list(disclosureId);\r\n      const list: Comment[] = res.data.data || [];\r\n      setCommentMap(prev => ({ ...prev, [disclosureId]: list }));\r\n    } catch (e) {\r\n      console.error(e);\r\n    } finally {\r\n      setCommentLoading(prev => ({ ...prev, [disclosureId]: false }));\r\n    }\r\n  };\r\n\r\n  const toggleComments = (disclosureId: number) => {\r\n    const isOpen = openComments[disclosureId];\r\n    const nextOpen = !isOpen;\r\n    setOpenComments(prev => ({ ...prev, [disclosureId]: nextOpen }));\r\n    if (nextOpen && !commentMap[disclosureId]) {\r\n      loadComments(disclosureId);\r\n    }\r\n  };\r\n\r\n  const handleSubmitComment = async (disclosureId: number) => {\r\n    if (!ensureLogin()) return;\r\n    const text = (commentInput[disclosureId] || '').trim();\r\n    if (!text) {\r\n      return;\r\n    }\r\n    const replyTarget = replyTo[disclosureId];\r\n    try {\r\n      const res = await commentApi.add({\r\n        disclosureId,\r\n        content: text,\r\n        parentId: replyTarget ? replyTarget.id : undefined\r\n      });\r\n      \r\n      if (res.data.code === 200) {\r\n        setCommentInput(prev => ({ ...prev, [disclosureId]: '' }));\r\n        setReplyTo(prev => ({ ...prev, [disclosureId]: null }));\r\n        // 强制重新加载评论列表\r\n        await loadComments(disclosureId);\r\n      } else {\r\n        alert(res.data.msg || 'コメントの投稿に失敗しました');\r\n      }\r\n    } catch (e) {\r\n      console.error(e);\r\n      alert('エラーが発生しました');\r\n    }\r\n  };\r\n\r\n  const handleDeleteComment = async (disclosureId: number, commentId: number) => {\r\n    if (!ensureLogin()) return;\r\n    if (!window.confirm('本当にこのコメントを削除しますか？')) {\r\n      return;\r\n    }\r\n    try {\r\n      await commentApi.del(commentId);\r\n      loadComments(disclosureId);\r\n    } catch (e) {\r\n      console.error(e);\r\n    }\r\n  };\r\n\r\n  const handleReply = (disclosureId: number, comment: Comment) => {\r\n    if (!ensureLogin()) return;\r\n    setReplyTo(prev => ({ ...prev, [disclosureId]: comment }));\r\n    setOpenComments(prev => ({ ...prev, [disclosureId]: true }));\r\n  };\r\n\r\n  const handleLike = async (id: number) => {\r\n    if (!ensureLogin()) return;\r\n    await disclosureOperateApi.like(id);\r\n  };\r\n\r\n  const handleCollect = async (id: number) => {\r\n    if (!ensureLogin()) return;\r\n    await disclosureOperateApi.collect(id);\r\n  };\r\n\r\n  return (\r\n    <div className=\"community-page-wrapper\" style={{ maxWidth: '1200px', margin: '20px auto', padding: '0 15px' }}>\r\n      <h2 style={{ marginBottom: '20px' }}>みんなの投稿 (承認済み)</h2>\r\n      \r\n      {loading ? (\r\n        <div>読み込み中...</div>\r\n      ) : disclosures.length === 0 ? (\r\n        <div className=\"no-tips\">投稿がまだありません</div>\r\n      ) : (\r\n        <div className=\"community-grid\" style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fill, minmax(280px, 1fr))', gap: '20px' }}>\r\n          {disclosures.map((item) => (\r\n            <div key={item.disclosureId} className=\"community-card\" style={{ border: '1px solid #eee', borderRadius: '8px', overflow: 'hidden', background: '#fff', boxShadow: '0 2px 4px rgba(0,0,0,0.05)' }}>\r\n              <div className=\"card-image\" style={{ height: '200px', background: '#f5f5f5', display: 'flex', alignItems: 'center', justifyContent: 'center', overflow: 'hidden' }}>\r\n                {item.imgUrl ? (\r\n                  <img \r\n                    src={item.imgUrl.includes(',') ? item.imgUrl.split(',')[0] : item.imgUrl}\r\n                    alt={item.title} \r\n                    style={{ width: '100%', height: '100%', objectFit: 'contain' }} \r\n                    onError={(e) => {\r\n                      console.error('Image load failed:', (e.target as HTMLImageElement).src);\r\n                      (e.target as HTMLImageElement).style.display = 'none';\r\n                    }}\r\n                  />\r\n                ) : (\r\n                  <span style={{ color: '#ccc' }}>No Image</span>\r\n                )}\r\n              </div>\r\n              <div className=\"card-content\" style={{ padding: '15px' }}>\r\n                <h3 style={{ margin: '0 0 10px', fontSize: '16px', lineHeight: '1.4', height: '44px', overflow: 'hidden' }}>{item.title}</h3>\r\n                <div style={{ color: '#ff5000', fontWeight: 'bold', fontSize: '18px', marginBottom: '10px' }}>¥{item.disclosurePrice}</div>\r\n                <p style={{ fontSize: '13px', color: '#666', marginBottom: '15px', height: '60px', overflow: 'hidden' }}>{item.content}</p>\r\n                <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\r\n                  <span style={{ fontSize: '12px', color: '#999' }}>{new Date(item.createTime).toLocaleDateString()}</span>\r\n                  <a href={item.link} target=\"_blank\" rel=\"noopener noreferrer\" style={{ background: '#ff5000', color: '#fff', padding: '5px 15px', borderRadius: '15px', textDecoration: 'none', fontSize: '13px' }}>\r\n                    詳細へ\r\n                  </a>\r\n                  <div style={{ display: 'flex', gap: '8px' }}>\r\n                    <button onClick={() => handleLike(item.disclosureId)} style={{ border: '1px solid #ddd', background: '#fff', padding: '5px 10px', cursor: 'pointer' }}>点赞</button>\r\n                    <button onClick={() => handleCollect(item.disclosureId)} style={{ border: '1px solid #ddd', background: '#fff', padding: '5px 10px', cursor: 'pointer' }}>收藏</button>\r\n                    <button\r\n                      onClick={() => toggleComments(item.disclosureId)}\r\n                      style={{ border: '1px solid #ddd', background: '#fff', padding: '5px 10px', cursor: 'pointer' }}\r\n                    >\r\n                      {openComments[item.disclosureId] ? '隠す' : 'コメント'}\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n                {openComments[item.disclosureId] && (\r\n                  <div style={{ marginTop: '12px', borderTop: '1px solid #f0f0f0', paddingTop: '10px' }}>\r\n                    <div style={{ marginBottom: '8px', fontSize: '13px', fontWeight: 'bold' }}>コメント</div>\r\n                    {commentLoading[item.disclosureId] ? (\r\n                      <div style={{ fontSize: '12px', color: '#999' }}>読み込み中...</div>\r\n                    ) : (commentMap[item.disclosureId] || []).length === 0 ? (\r\n                      <div style={{ fontSize: '12px', color: '#999', padding: '8px 0' }}>コメントはまだありません。</div>\r\n                    ) : (\r\n                      <div style={{ display: 'flex', flexDirection: 'column', gap: '8px' }}>\r\n                        {(commentMap[item.disclosureId] || []).map((c) => {\r\n                          const commentsForDisclosure = commentMap[item.disclosureId] || [];\r\n                          const parent = c.parentId ? commentsForDisclosure.find(p => p.id === c.parentId) : undefined;\r\n                          const isReply = !!parent;\r\n                          return (\r\n                            <div\r\n                              key={c.id}\r\n                              style={{\r\n                                display: 'flex',\r\n                                flexDirection: 'column',\r\n                                padding: '6px 8px',\r\n                                background: '#fafafa',\r\n                                borderRadius: '4px'\r\n                              }}\r\n                            >\r\n                              <div style={{ display: 'flex', alignItems: 'center', marginBottom: '4px', fontSize: '12px' }}>\r\n                                <span style={{ fontWeight: 600, marginRight: '6px' }}>\r\n                                  {c.publisher ? '投稿者 ' : ''}\r\n                                  {c.nickName || '匿名'}\r\n                                </span>\r\n                                <span style={{ color: '#999', fontSize: '11px' }}>\r\n                                  {new Date(c.createTime).toLocaleString()}\r\n                                </span>\r\n                              </div>\r\n                              <div style={{ fontSize: '13px', marginBottom: '4px' }}>\r\n                                {isReply && parent ? (\r\n                                  <span style={{ color: '#666', marginRight: '4px' }}>\r\n                                    返信 @{parent.nickName || '匿名'}:\r\n                                  </span>\r\n                                ) : null}\r\n                                <span>{c.content}</span>\r\n                              </div>\r\n                              <div style={{ display: 'flex', gap: '8px', fontSize: '12px', color: '#0066c0' }}>\r\n                                <button\r\n                                  type=\"button\"\r\n                                  onClick={() => handleReply(item.disclosureId, c)}\r\n                                  style={{ border: 'none', background: 'none', padding: 0, cursor: 'pointer' }}\r\n                                >\r\n                                  返信\r\n                                </button>\r\n                                {c.owner && (\r\n                                  <button\r\n                                    type=\"button\"\r\n                                    onClick={() => handleDeleteComment(item.disclosureId, c.id)}\r\n                                    style={{ border: 'none', background: 'none', padding: 0, cursor: 'pointer', color: '#d00' }}\r\n                                  >\r\n                                    削除\r\n                                  </button>\r\n                                )}\r\n                              </div>\r\n                            </div>\r\n                          );\r\n                        })}\r\n                      </div>\r\n                    )}\r\n                    <div style={{ marginTop: '8px' }}>\r\n                      {replyTo[item.disclosureId] && (\r\n                        <div style={{ fontSize: '12px', marginBottom: '4px', color: '#666' }}>\r\n                          返信先: {replyTo[item.disclosureId]?.nickName || '匿名'}{' '}\r\n                          <button\r\n                            type=\"button\"\r\n                            onClick={() => setReplyTo(prev => ({ ...prev, [item.disclosureId]: null }))}\r\n                            style={{ border: 'none', background: 'none', padding: 0, marginLeft: '4px', cursor: 'pointer', color: '#999' }}\r\n                          >\r\n                            取消\r\n                          </button>\r\n                        </div>\r\n                      )}\r\n                      <textarea\r\n                        value={commentInput[item.disclosureId] || ''}\r\n                        onChange={e => setCommentInput(prev => ({ ...prev, [item.disclosureId]: e.target.value }))}\r\n                        placeholder={replyTo[item.disclosureId] ? `返信 @${replyTo[item.disclosureId]?.nickName || '匿名'}...` : \"コメントを入力してください...\"}\r\n                        style={{ width: '100%', minHeight: '60px', padding: '6px 8px', fontSize: '13px', boxSizing: 'border-box', borderRadius: '4px', border: '1px solid #ddd' }}\r\n                      />\r\n                      <div style={{ textAlign: 'right', marginTop: '4px' }}>\r\n                        <button\r\n                          type=\"button\"\r\n                          onClick={() => handleSubmitComment(item.disclosureId)}\r\n                          style={{ background: '#ff5000', color: '#fff', border: 'none', padding: '5px 12px', borderRadius: '4px', cursor: 'pointer', fontSize: '13px' }}\r\n                        >\r\n                          投稿\r\n                        </button>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CommunityPage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}