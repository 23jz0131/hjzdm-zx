{"ast":null,"code":"import React,{useState}from'react';import{useNavigate}from'react-router-dom';import{userApi}from'../services/api';import'./ProfileSetupPage.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ProfileSetupPage=()=>{const navigate=useNavigate();const[step,setStep]=useState(1);// 1: 选择头像, 2: 填写信息\nconst[selectedAvatar,setSelectedAvatar]=useState('');const[nickname,setNickname]=useState('');const[gender,setGender]=useState(0);// 0: 未设定, 1: 男性, 2: 女性\nconst[birthDate,setBirthDate]=useState('');// 默认头像选项\nconst defaultAvatars=['https://via.placeholder.com/150/FF6B6B/FFFFFF?text=A','https://via.placeholder.com/150/4ECDC4/FFFFFF?text=B','https://via.placeholder.com/150/45B7D1/FFFFFF?text=C','https://via.placeholder.com/150/96CEB4/FFFFFF?text=D','https://via.placeholder.com/150/FFEAA7/FFFFFF?text=E','https://via.placeholder.com/150/DDA0DD/FFFFFF?text=F'];const handleNext=()=>{if(step===1&&!selectedAvatar){alert('请选择一个头像');return;}setStep(2);};const handleSubmit=async()=>{if(!nickname){alert('请输入昵称');return;}try{// 调用API保存用户资料\nconst response=await userApi.updateProfile({avatar:selectedAvatar,nickname,gender,birthDate:birthDate||null});if(response.data.code===200){// 跳转到首页\nnavigate('/');}else{alert(response.data.message||'保存失败，请重试');}}catch(error){console.error('保存用户资料时发生错误:',error);alert('保存失败，请重试');}};const handleSkip=()=>{// 跳过设置，直接进入首页\nnavigate('/');};return/*#__PURE__*/_jsx(\"div\",{className:\"profile-setup-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"profile-setup-card\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"setup-title\",children:\"\\u30D7\\u30ED\\u30D5\\u30A3\\u30FC\\u30EB\\u8A2D\\u5B9A\"}),/*#__PURE__*/_jsx(\"p\",{className:\"setup-subtitle\",children:\"\\u4EE5\\u4E0B\\u306E\\u60C5\\u5831\\u3092\\u8A2D\\u5B9A\\u3057\\u3066\\u3001\\u30A2\\u30AB\\u30A6\\u30F3\\u30C8\\u3092\\u30AB\\u30B9\\u30BF\\u30DE\\u30A4\\u30BA\\u3057\\u307E\\u3057\\u3087\\u3046\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"setup-steps\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"step \".concat(step>=1?'active':''),children:\"1. \\u30A2\\u30D0\\u30BF\\u30FC\"}),/*#__PURE__*/_jsx(\"div\",{className:\"step \".concat(step>=2?'active':''),children:\"2. \\u57FA\\u672C\\u60C5\\u5831\"})]}),step===1&&/*#__PURE__*/_jsxs(\"div\",{className:\"setup-step-content\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\u304A\\u6C17\\u306B\\u5165\\u308A\\u306E\\u30A2\\u30D0\\u30BF\\u30FC\\u3092\\u9078\\u629E\\u3057\\u3066\\u304F\\u3060\\u3055\\u3044\"}),/*#__PURE__*/_jsx(\"div\",{className:\"avatar-grid\",children:defaultAvatars.map((avatar,index)=>/*#__PURE__*/_jsx(\"div\",{className:\"avatar-option \".concat(selectedAvatar===avatar?'selected':''),onClick:()=>setSelectedAvatar(avatar),children:/*#__PURE__*/_jsx(\"img\",{src:avatar,alt:\"Avatar \".concat(index+1)})},index))}),/*#__PURE__*/_jsx(\"button\",{className:\"next-btn\",onClick:handleNext,children:\"\\u6B21\\u3078\"})]}),step===2&&/*#__PURE__*/_jsxs(\"div\",{className:\"setup-step-content\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\u57FA\\u672C\\u60C5\\u5831\\u3092\\u5165\\u529B\\u3057\\u3066\\u304F\\u3060\\u3055\\u3044\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"info-form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u30CB\\u30C3\\u30AF\\u30CD\\u30FC\\u30E0 *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:nickname,onChange:e=>setNickname(e.target.value),placeholder:\"\\u30CB\\u30C3\\u30AF\\u30CD\\u30FC\\u30E0\\u3092\\u5165\\u529B\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u6027\\u5225\"}),/*#__PURE__*/_jsxs(\"select\",{value:gender,onChange:e=>setGender(Number(e.target.value)),children:[/*#__PURE__*/_jsx(\"option\",{value:0,children:\"\\u672A\\u8A2D\\u5B9A\"}),/*#__PURE__*/_jsx(\"option\",{value:1,children:\"\\u7537\\u6027\"}),/*#__PURE__*/_jsx(\"option\",{value:2,children:\"\\u5973\\u6027\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u751F\\u5E74\\u6708\\u65E5\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:birthDate,onChange:e=>setBirthDate(e.target.value)})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"button-group\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"submit-btn\",onClick:handleSubmit,children:\"\\u5B8C\\u4E86\"}),/*#__PURE__*/_jsx(\"button\",{className:\"skip-btn\",onClick:handleSkip,children:\"\\u30B9\\u30AD\\u30C3\\u30D7\"})]})]})]})});};export default ProfileSetupPage;","map":{"version":3,"names":["React","useState","useNavigate","userApi","jsx","_jsx","jsxs","_jsxs","ProfileSetupPage","navigate","step","setStep","selectedAvatar","setSelectedAvatar","nickname","setNickname","gender","setGender","birthDate","setBirthDate","defaultAvatars","handleNext","alert","handleSubmit","response","updateProfile","avatar","data","code","message","error","console","handleSkip","className","children","concat","map","index","onClick","src","alt","type","value","onChange","e","target","placeholder","Number"],"sources":["C:/Users/3jz/Desktop/HJZDM/frontend/hjzdm-frontend/src/pages/ProfileSetupPage.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { userApi } from '../services/api';\nimport './ProfileSetupPage.css';\n\nconst ProfileSetupPage: React.FC = () => {\n  const navigate = useNavigate();\n  const [step, setStep] = useState<number>(1); // 1: 选择头像, 2: 填写信息\n  const [selectedAvatar, setSelectedAvatar] = useState<string>('');\n  const [nickname, setNickname] = useState<string>('');\n  const [gender, setGender] = useState<number>(0); // 0: 未设定, 1: 男性, 2: 女性\n  const [birthDate, setBirthDate] = useState<string>('');\n\n  // 默认头像选项\n  const defaultAvatars = [\n    'https://via.placeholder.com/150/FF6B6B/FFFFFF?text=A',\n    'https://via.placeholder.com/150/4ECDC4/FFFFFF?text=B',\n    'https://via.placeholder.com/150/45B7D1/FFFFFF?text=C',\n    'https://via.placeholder.com/150/96CEB4/FFFFFF?text=D',\n    'https://via.placeholder.com/150/FFEAA7/FFFFFF?text=E',\n    'https://via.placeholder.com/150/DDA0DD/FFFFFF?text=F'\n  ];\n\n  const handleNext = () => {\n    if (step === 1 && !selectedAvatar) {\n      alert('请选择一个头像');\n      return;\n    }\n    setStep(2);\n  };\n\n  const handleSubmit = async () => {\n    if (!nickname) {\n      alert('请输入昵称');\n      return;\n    }\n\n    try {\n      // 调用API保存用户资料\n      const response = await userApi.updateProfile({\n        avatar: selectedAvatar,\n        nickname,\n        gender,\n        birthDate: birthDate || null\n      });\n\n      if (response.data.code === 200) {\n        // 跳转到首页\n        navigate('/');\n      } else {\n        alert(response.data.message || '保存失败，请重试');\n      }\n    } catch (error) {\n      console.error('保存用户资料时发生错误:', error);\n      alert('保存失败，请重试');\n    }\n  };\n\n  const handleSkip = () => {\n    // 跳过设置，直接进入首页\n    navigate('/');\n  };\n\n  return (\n    <div className=\"profile-setup-container\">\n      <div className=\"profile-setup-card\">\n        <h2 className=\"setup-title\">プロフィール設定</h2>\n        <p className=\"setup-subtitle\">以下の情報を設定して、アカウントをカスタマイズしましょう</p>\n        \n        {/* 步骤指示 */}\n        <div className=\"setup-steps\">\n          <div className={`step ${step >= 1 ? 'active' : ''}`}>1. アバター</div>\n          <div className={`step ${step >= 2 ? 'active' : ''}`}>2. 基本情報</div>\n        </div>\n\n        {/* 歩骤内容 */}\n        {step === 1 && (\n          <div className=\"setup-step-content\">\n            <h3>お気に入りのアバターを選択してください</h3>\n            <div className=\"avatar-grid\">\n              {defaultAvatars.map((avatar, index) => (\n                <div \n                  key={index}\n                  className={`avatar-option ${selectedAvatar === avatar ? 'selected' : ''}`}\n                  onClick={() => setSelectedAvatar(avatar)}\n                >\n                  <img src={avatar} alt={`Avatar ${index + 1}`} />\n                </div>\n              ))}\n            </div>\n            <button className=\"next-btn\" onClick={handleNext}>次へ</button>\n          </div>\n        )}\n\n        {step === 2 && (\n          <div className=\"setup-step-content\">\n            <h3>基本情報を入力してください</h3>\n            <div className=\"info-form\">\n              <div className=\"form-group\">\n                <label>ニックネーム *</label>\n                <input\n                  type=\"text\"\n                  value={nickname}\n                  onChange={(e) => setNickname(e.target.value)}\n                  placeholder=\"ニックネームを入力\"\n                />\n              </div>\n              \n              <div className=\"form-group\">\n                <label>性別</label>\n                <select \n                  value={gender} \n                  onChange={(e) => setGender(Number(e.target.value))}\n                >\n                  <option value={0}>未設定</option>\n                  <option value={1}>男性</option>\n                  <option value={2}>女性</option>\n                </select>\n              </div>\n              \n              <div className=\"form-group\">\n                <label>生年月日</label>\n                <input\n                  type=\"date\"\n                  value={birthDate}\n                  onChange={(e) => setBirthDate(e.target.value)}\n                />\n              </div>\n            </div>\n            \n            <div className=\"button-group\">\n              <button className=\"submit-btn\" onClick={handleSubmit}>完了</button>\n              <button className=\"skip-btn\" onClick={handleSkip}>スキップ</button>\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default ProfileSetupPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}