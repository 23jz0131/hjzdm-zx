{"ast":null,"code":"import _objectSpread from\"C:/Users/3jz/Desktop/HJZDM/frontend/hjzdm-frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState}from'react';import{disclosureApi}from'../services/api';import{useNavigate}from'react-router-dom';import Header from'../components/Header';import'./SubmitDisclosurePage.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const SubmitDisclosurePage=()=>{const navigate=useNavigate();const[formData,setFormData]=useState({title:'',content:'',link:'',disclosurePrice:'',imgUrl:''});const[loading,setLoading]=useState(false);const[message,setMessage]=useState(null);const handleInputChange=e=>{const{name,value}=e.target;setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{[name]:name==='disclosurePrice'?value:value}));};const handleSubmit=async e=>{e.preventDefault();setLoading(true);setMessage(null);try{const response=await disclosureApi.add(_objectSpread(_objectSpread({},formData),{},{disclosurePrice:parseFloat(formData.disclosurePrice)||0}));if(response.data.code===200){setMessage({type:'success',text:'投稿が送信されました。管理者の審査を通過すると公開されます。'});// 重置表单\nsetFormData({title:'',content:'',link:'',disclosurePrice:'',imgUrl:''});}else{setMessage({type:'error',text:response.data.message||'投稿の送信に失敗しました'});}}catch(error){console.error('投稿エラー:',error);setMessage({type:'error',text:'投稿の送信中にエラーが発生しました'});}finally{setLoading(false);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"submit-disclosure-container\",children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"submit-disclosure-content\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\u6295\\u7A3F\\u30D5\\u30A9\\u30FC\\u30E0\"}),message&&/*#__PURE__*/_jsx(\"div\",{className:\"message \".concat(message.type),children:message.text}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"disclosure-form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"title\",children:\"\\u30BF\\u30A4\\u30C8\\u30EB *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"title\",name:\"title\",value:formData.title,onChange:handleInputChange,required:true,placeholder:\"\\u6295\\u7A3F\\u306E\\u30BF\\u30A4\\u30C8\\u30EB\\u3092\\u5165\\u529B\\u3057\\u3066\\u304F\\u3060\\u3055\\u3044\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"content\",children:\"\\u5185\\u5BB9 *\"}),/*#__PURE__*/_jsx(\"textarea\",{id:\"content\",name:\"content\",value:formData.content,onChange:handleInputChange,required:true,placeholder:\"\\u6295\\u7A3F\\u306E\\u8A73\\u7D30\\u5185\\u5BB9\\u3092\\u5165\\u529B\\u3057\\u3066\\u304F\\u3060\\u3055\\u3044\",rows:5})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"link\",children:\"\\u30EA\\u30F3\\u30AF\"}),/*#__PURE__*/_jsx(\"input\",{type:\"url\",id:\"link\",name:\"link\",value:formData.link,onChange:handleInputChange,placeholder:\"\\u95A2\\u9023\\u3059\\u308B\\u30A6\\u30A7\\u30D6\\u30B5\\u30A4\\u30C8\\u306EURL\\u3092\\u5165\\u529B\\u3057\\u3066\\u304F\\u3060\\u3055\\u3044\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"disclosurePrice\",children:\"\\u4FA1\\u683C\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",id:\"disclosurePrice\",name:\"disclosurePrice\",value:formData.disclosurePrice,onChange:handleInputChange,placeholder:\"\\u4FA1\\u683C\\u3092\\u5165\\u529B\\u3057\\u3066\\u304F\\u3060\\u3055\\u3044\",min:\"0\",step:\"any\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"imgUrl\",children:\"\\u753B\\u50CFURL\"}),/*#__PURE__*/_jsx(\"input\",{type:\"url\",id:\"imgUrl\",name:\"imgUrl\",value:formData.imgUrl,onChange:handleInputChange,placeholder:\"\\u753B\\u50CF\\u306EURL\\u3092\\u5165\\u529B\\u3057\\u3066\\u304F\\u3060\\u3055\\u3044\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-actions\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>navigate(-1),className:\"btn-cancel\",children:\"\\u30AD\\u30E3\\u30F3\\u30BB\\u30EB\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:loading,className:\"btn-submit\",children:loading?'送信中...':'投稿を送信'})]})]})]})]});};export default SubmitDisclosurePage;","map":{"version":3,"names":["React","useState","disclosureApi","useNavigate","Header","jsx","_jsx","jsxs","_jsxs","SubmitDisclosurePage","navigate","formData","setFormData","title","content","link","disclosurePrice","imgUrl","loading","setLoading","message","setMessage","handleInputChange","e","name","value","target","prev","_objectSpread","handleSubmit","preventDefault","response","add","parseFloat","data","code","type","text","error","console","className","children","concat","onSubmit","htmlFor","id","onChange","required","placeholder","rows","min","step","onClick","disabled"],"sources":["C:/Users/3jz/Desktop/HJZDM/frontend/hjzdm-frontend/src/pages/SubmitDisclosurePage.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { disclosureApi } from '../services/api';\nimport { useNavigate } from 'react-router-dom';\nimport Header from '../components/Header';\nimport './SubmitDisclosurePage.css';\n\nconst SubmitDisclosurePage: React.FC = () => {\n  const navigate = useNavigate();\n  \n  const [formData, setFormData] = useState({\n    title: '',\n    content: '',\n    link: '',\n    disclosurePrice: '',\n    imgUrl: ''\n  });\n  \n  const [loading, setLoading] = useState(false);\n  const [message, setMessage] = useState<{type: 'success' | 'error', text: string} | null>(null);\n\n  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>) => {\n    const { name, value } = e.target;\n    setFormData(prev => ({\n      ...prev,\n      [name]: name === 'disclosurePrice' ? value : value\n    }));\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setLoading(true);\n    setMessage(null);\n    \n    try {\n      const response = await disclosureApi.add({\n        ...formData,\n        disclosurePrice: parseFloat(formData.disclosurePrice) || 0\n      });\n      \n      if (response.data.code === 200) {\n        setMessage({ type: 'success', text: '投稿が送信されました。管理者の審査を通過すると公開されます。' });\n        // 重置表单\n        setFormData({\n          title: '',\n          content: '',\n          link: '',\n          disclosurePrice: '',\n          imgUrl: ''\n        });\n      } else {\n        setMessage({ type: 'error', text: response.data.message || '投稿の送信に失敗しました' });\n      }\n    } catch (error) {\n      console.error('投稿エラー:', error);\n      setMessage({ type: 'error', text: '投稿の送信中にエラーが発生しました' });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"submit-disclosure-container\">\n      <Header />\n      <div className=\"submit-disclosure-content\">\n        <h1>投稿フォーム</h1>\n        \n        {message && (\n          <div className={`message ${message.type}`}>\n            {message.text}\n          </div>\n        )}\n        \n        <form onSubmit={handleSubmit} className=\"disclosure-form\">\n          <div className=\"form-group\">\n            <label htmlFor=\"title\">タイトル *</label>\n            <input\n              type=\"text\"\n              id=\"title\"\n              name=\"title\"\n              value={formData.title}\n              onChange={handleInputChange}\n              required\n              placeholder=\"投稿のタイトルを入力してください\"\n            />\n          </div>\n          \n          <div className=\"form-group\">\n            <label htmlFor=\"content\">内容 *</label>\n            <textarea\n              id=\"content\"\n              name=\"content\"\n              value={formData.content}\n              onChange={handleInputChange}\n              required\n              placeholder=\"投稿の詳細内容を入力してください\"\n              rows={5}\n            />\n          </div>\n          \n          <div className=\"form-group\">\n            <label htmlFor=\"link\">リンク</label>\n            <input\n              type=\"url\"\n              id=\"link\"\n              name=\"link\"\n              value={formData.link}\n              onChange={handleInputChange}\n              placeholder=\"関連するウェブサイトのURLを入力してください\"\n            />\n          </div>\n          \n          <div className=\"form-group\">\n            <label htmlFor=\"disclosurePrice\">価格</label>\n            <input\n              type=\"number\"\n              id=\"disclosurePrice\"\n              name=\"disclosurePrice\"\n              value={formData.disclosurePrice}\n              onChange={handleInputChange}\n              placeholder=\"価格を入力してください\"\n              min=\"0\"\n              step=\"any\"\n            />\n          </div>\n          \n          <div className=\"form-group\">\n            <label htmlFor=\"imgUrl\">画像URL</label>\n            <input\n              type=\"url\"\n              id=\"imgUrl\"\n              name=\"imgUrl\"\n              value={formData.imgUrl}\n              onChange={handleInputChange}\n              placeholder=\"画像のURLを入力してください\"\n            />\n          </div>\n          \n          <div className=\"form-actions\">\n            <button \n              type=\"button\" \n              onClick={() => navigate(-1)}\n              className=\"btn-cancel\"\n            >\n              キャンセル\n            </button>\n            <button \n              type=\"submit\" \n              disabled={loading}\n              className=\"btn-submit\"\n            >\n              {loading ? '送信中...' : '投稿を送信'}\n            </button>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n};\n\nexport default SubmitDisclosurePage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}